(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3562],{42565:(e,t,a)=>{Promise.resolve().then(a.bind(a,55119))},55119:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var i=a(95155),r=a(12115),s=a(35695),d=a(88482),l=a(34964),n=a(53580),c=a(33223),o=a(9499),u=a(5492),p=a(52095),m=a(54157),b=a(78803),h=a(40647),y=a(71920);function g(){let e=(0,s.useParams)(),t=(0,s.useRouter)(),{toast:a}=(0,n.dj)(),[g,j]=(0,r.useState)(!0),{getProjectById:v,updateProject:x}=(0,c.b)(),_=e.id,{formData:w,updateData:f,activeTab:N,setActiveTab:q,isSubmitting:E,setIsSubmitting:T,formErrors:k,handleTabChange:D,handleNextTab:C,handlePrevTab:P}=(0,o.d)();(0,r.useEffect)(()=>{let e=async()=>{try{j(!0);let{data:e,error:t}=await v(_);if(t){a({title:"Error loading project",description:t,variant:"destructive"});return}e&&(f("details",{title:e.title||"",category:e.category||"",description:e.description||"",visibility:e.visibility||"public"}),f("requirements",{technicalRequirements:e.technical_requirements||"",skills:e.required_skills?e.required_skills.split(", "):[],deliverables:e.deliverables?e.deliverables.split(", "):[]}),f("budget",{tier:e.pricing_tier||"standard",amount:e.budget||2500,paymentType:e.payment_type||"fixed"}),f("timeline",{duration:e.duration_days||30,startDate:e.start_date?new Date(e.start_date):new Date,priority:e.priority||"medium"}))}catch(e){console.error("Error fetching project:",e),a({title:"Error",description:"Failed to load project details",variant:"destructive"})}finally{j(!1)}};_&&e()},[_,v,a,f]);let S=async()=>{T(!0);try{let e={title:w.details.title,description:w.details.description,category:w.details.category,technical_requirements:w.requirements.technicalRequirements,required_skills:w.requirements.skills.join(", "),deliverables:w.requirements.deliverables.join(", "),budget:w.budget.amount,pricing_tier:w.budget.tier,payment_type:w.budget.paymentType,duration_days:w.timeline.duration,priority:w.timeline.priority,visibility:w.details.visibility,start_date:w.timeline.startDate.toISOString()},{data:i,error:r}=await x(_,e);if(r)throw Error(r);a({title:"Project updated successfully!",description:"Your project has been updated."}),t.push("/app/projects/".concat(_))}catch(e){console.error("Error updating project:",e),a({title:"Error updating project",description:e instanceof Error?e.message:"There was an error updating your project. Please try again.",variant:"destructive"})}finally{T(!1)}};return g?(0,i.jsxs)("div",{className:"space-y-8 animate-pulse",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"h-8 bg-muted rounded-md w-1/3"}),(0,i.jsx)("div",{className:"h-10 bg-muted rounded-md w-32"})]}),(0,i.jsx)("div",{className:"h-64 bg-muted rounded-lg"})]}):(0,i.jsx)(u.R,{title:"Edit Project",subtitle:"Update your project details",onBack:()=>{t.push("/app/projects/".concat(_))},onSave:S,isSubmitting:E,showSaveButton:!0,children:(0,i.jsxs)(p.C,{activeTab:N,setActiveTab:D,handleNextTab:C,handlePrevTab:P,formErrors:k,showReviewTab:!1,children:[(0,i.jsx)(l.TabsContent,{value:"details",className:"space-y-6",children:(0,i.jsx)(d.Zp,{className:"bg-card rounded-lg border shadow-sm p-6",children:(0,i.jsx)(m.A,{data:w.details,updateData:e=>f("details",e)})})}),(0,i.jsx)(l.TabsContent,{value:"requirements",className:"space-y-6",children:(0,i.jsx)(d.Zp,{className:"bg-card rounded-lg border shadow-sm p-6",children:(0,i.jsx)(b.A,{data:w.requirements,updateData:e=>f("requirements",e)})})}),(0,i.jsx)(l.TabsContent,{value:"budget",className:"space-y-6",children:(0,i.jsx)(d.Zp,{className:"bg-card rounded-lg border shadow-sm p-6",children:(0,i.jsx)(h.A,{data:w.budget,updateData:e=>f("budget",e)})})}),(0,i.jsx)(l.TabsContent,{value:"timeline",className:"space-y-6",children:(0,i.jsx)(d.Zp,{className:"bg-card rounded-lg border shadow-sm p-6",children:(0,i.jsx)(y.A,{data:w.timeline,updateData:e=>f("timeline",e)})})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2848,5687,8138,8074,9550,7275,7209,7938,3860,3020,4084,5922,8441,1684,7358],()=>t(42565)),_N_E=e.O()}]);