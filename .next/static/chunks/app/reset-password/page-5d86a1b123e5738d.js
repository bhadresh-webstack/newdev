(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4700],{34477:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return a.findSourceMapURL}});let r=s(53806),a=s(31818),n=s(34979).createServerReference},35169:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,t,s)=>{"use strict";var r=s(18999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},40646:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},40968:(e,t,s)=>{"use strict";s.d(t,{b:()=>l});var r=s(12115),a=s(63655),n=s(95155),o=r.forwardRef((e,t)=>(0,n.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var l=o},51154:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},55454:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(95155),a=s(12115);let n=(0,s(19946).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var o=s(92657),l=s(35695),i=s(53580),c=s(81347),u=s(89852),d=s(82714),p=s(88482),m=s(97168),f=s(51154),h=s(91041),y=s(88637),x=s(35355),w=s(59269),g=s(69922),j=s(69711);function v(){let{verifyToken:e,resetPassword:t,isLoading:s,error:v,clearError:k}=(0,c.n)(),[b,N]=(0,a.useState)(""),[A,P]=(0,a.useState)(""),[S,R]=(0,a.useState)(null),[C,L]=(0,a.useState)(!1),[M,E]=(0,a.useState)(!1),[_,q]=(0,a.useState)(!0),[z,O]=(0,a.useState)(null),[T,W]=(0,a.useState)(!1),[B,D]=(0,a.useState)(""),Y=(0,l.useRouter)(),F=(0,l.useSearchParams)(),{toast:H}=(0,i.dj)(),G=(null==F?void 0:F.get("token"))||"";(0,a.useEffect)(()=>()=>{k()},[k]),(0,a.useEffect)(()=>{v&&R(v)},[v]),(0,a.useEffect)(()=>{(async()=>{if(!G){q(!1),O("Invalid or missing token. Please request a new password reset link.");return}try{let{data:t,error:s}=await e(G);s?(O(s),E(!1)):(E(!0),(null==t?void 0:t.email)&&D(t.email))}catch(e){O("Failed to verify token. Please try again."),E(!1)}finally{q(!1)}})()},[G,e]);let J=()=>b?b.length<8?(R("Password must be at least 8 characters long"),!1):b!==A?(R("Passwords do not match"),!1):(R(null),!0):(R("Password is required"),!1),U=async e=>{if(e.preventDefault(),!J())return;let{error:s}=await t(G,b);s?R(s):(L(!0),H({title:"Password reset successful",description:"Your password has been reset. You can now log in with your new password."}))};return _?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(f.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,r.jsx)(h.A,{title:"Reset your password",description:"Create a new password for your account to securely access your projects.",testimonial:{quote:"Security is our top priority. We ensure your account is protected with strong password policies and regular security updates.",author:"Webstack Security Team",company:""},children:(0,r.jsx)(y.A,{title:"Reset Password",description:M?"Create a new password for ".concat(B):"Verify your reset token",children:M?C?(0,r.jsx)(p.Wu,{className:"space-y-4",children:(0,r.jsx)(j.A,{title:"Password Reset Successful!",message:"Your password has been reset successfully. You can now log in with your new password.",buttonText:"Go to Login",onButtonClick:()=>Y.push("/login")})}):(0,r.jsxs)("form",{onSubmit:U,noValidate:!0,children:[(0,r.jsxs)(p.Wu,{className:"space-y-4",children:[(0,r.jsx)(x.A,{error:S}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"password",children:"New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.p,{id:"password",type:T?"text":"password",className:"transition-all border-muted-foreground/20 focus:border-primary pr-10",value:b,onChange:e=>{N(e.target.value),S&&R(null)}}),(0,r.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>W(!T),children:T?(0,r.jsx)(n,{className:"h-4 w-4"}):(0,r.jsx)(o.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 8 characters long"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,r.jsx)(u.p,{id:"confirmPassword",type:T?"text":"password",className:"transition-all border-muted-foreground/20 focus:border-primary",value:A,onChange:e=>{P(e.target.value),S&&R(null)}})]})]}),(0,r.jsxs)("div",{className:"px-6 pb-6 pt-2 space-y-4",children:[(0,r.jsx)(w.A,{isLoading:s,loadingText:"Resetting password...",text:"Reset Password"}),(0,r.jsx)(g.A,{text:"Remember your password?",linkText:"Back to Login",linkHref:"/login"})]})]}):(0,r.jsxs)(p.Wu,{className:"space-y-4 text-center",children:[(0,r.jsx)(x.A,{error:z}),(0,r.jsx)(m.$,{className:"mt-4 w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 transition-opacity font-normal",onClick:()=>Y.push("/forgot-password"),children:"Request New Reset Link"}),(0,r.jsx)("div",{className:"text-center text-sm font-light mt-4",children:(0,r.jsx)(g.A,{text:"Remember your password?",linkText:"Back to Login",linkHref:"/login"})})]})})})}},69711:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(95155),a=s(40646),n=s(97168);function o(e){let{title:t,message:s,buttonText:o,onButtonClick:l}=e;return(0,r.jsxs)("div",{className:"space-y-4 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"rounded-full bg-green-100 p-3",children:(0,r.jsx)(a.A,{className:"h-6 w-6 text-green-600"})})}),(0,r.jsx)("p",{className:"text-lg font-medium",children:t}),(0,r.jsx)("p",{className:"text-muted-foreground font-light",children:s}),(0,r.jsx)(n.$,{className:"mt-4 w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 transition-opacity font-normal",onClick:l,children:o})]})}},76424:(e,t,s)=>{Promise.resolve().then(s.bind(s,55454))},85339:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},92657:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},94498:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2848,5687,8138,6874,2491,8441,1684,7358],()=>t(76424)),_N_E=e.O()}]);