"use strict";exports.id=8490,exports.ids=[8490],exports.modules={60:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(62688).A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},5336:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(62688).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7965:(e,s,t)=>{t.d(s,{w:()=>c});var a=t(60687),r=t(43210),i=t(14163),l="horizontal",d=["horizontal","vertical"],n=r.forwardRef((e,s)=>{var t;let{decorative:r,orientation:n=l,...o}=e,c=(t=n,d.includes(t))?n:l;return(0,a.jsx)(i.sG.div,{"data-orientation":c,...r?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:s})});n.displayName="Separator";var o=t(96241);let c=r.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...r},i)=>(0,a.jsx)(n,{ref:i,decorative:t,orientation:s,className:(0,o.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));c.displayName=n.displayName},15616:(e,s,t)=>{t.d(s,{T:()=>l});var a=t(60687),r=t(43210),i=t(96241);let l=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));l.displayName="Textarea"},33135:(e,s,t)=>{t.d(s,{AM:()=>d,Wv:()=>n,hl:()=>o});var a=t(60687),r=t(43210),i=t(40599),l=t(96241);let d=i.bL,n=i.l9,o=r.forwardRef(({className:e,align:s="center",sideOffset:t=4,...r},d)=>(0,a.jsx)(i.ZL,{children:(0,a.jsx)(i.UC,{ref:d,align:s,sideOffset:t,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));o.displayName=i.UC.displayName},39390:(e,s,t)=>{t.d(s,{J:()=>o});var a=t(60687),r=t(43210),i=t(78148),l=t(24224),d=t(96241);let n=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.b,{ref:t,className:(0,d.cn)(n(),e),...s}));o.displayName=i.b.displayName},55192:(e,s,t)=>{t.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>l,aR:()=>d,wL:()=>m});var a=t(60687),r=t(43210),i=t(96241);let l=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));l.displayName="Card";let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));d.displayName="CardHeader";let n=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));n.displayName="CardTitle";let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent";let m=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},56924:(e,s,t)=>{t.d(s,{V:()=>d});var a=t(60687),r=t(39475),i=t(96241),l=t(24934);function d({className:e,classNames:s,showOutsideDays:t=!0,...d}){return(0,a.jsx)(r.h,{showOutsideDays:t,className:(0,i.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,l.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,l.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},...d})}d.displayName="Calendar"},63143:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(62688).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},63974:(e,s,t)=>{t.d(s,{TR:()=>f,bq:()=>x,eb:()=>b,gC:()=>g,l6:()=>c,s3:()=>m,yv:()=>u});var a=t(60687),r=t(43210),i=t(22670),l=t(78272),d=t(3589),n=t(13964),o=t(96241);let c=i.bL,m=i.YJ,u=i.WT,x=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.l9,{ref:r,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=i.l9.displayName;let p=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})}));p.displayName=i.PP.displayName;let h=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})}));h.displayName=i.wn.displayName;let g=r.forwardRef(({className:e,children:s,position:t="popper",...r},l)=>(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{ref:l,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,a.jsx)(p,{}),(0,a.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(h,{})]})}));g.displayName=i.UC.displayName;let f=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}));f.displayName=i.JU.displayName;let b=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.q7,{ref:r,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:s})]}));b.displayName=i.q7.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=i.wv.displayName},69021:(e,s,t)=>{t.d(s,{d:()=>d});var a=t(26787),r=t(34735),i=t(96241),l=t(46677);let d=(0,a.v)((e,s)=>{let t=(0,i.s)(async()=>{try{let{projectFilter:t,statusFilter:a,groupFilter:i,assigneeFilter:d,searchQuery:n}=s();e({isLoading:!0,error:null});let o=new URLSearchParams;t&&o.append("projectId",t),a&&o.append("status",a),i&&o.append("taskGroup",i),d&&o.append("assignedTo",d);let c=l.s.TASK.base;t&&!d&&(c=l.s.TASK.byProject(t)),d&&!t&&(c=l.s.TASK.byUser(d));let m=o.toString(),u=m?`${c}?${m}`:c,{data:x,error:p}=await (0,r.A)("GET",u);if(p)throw Error(p);let h=x||[];if(n&&h.length>0){let e=n.toLowerCase();h=h.filter(s=>s.title.toLowerCase().includes(e)||s.description.toLowerCase().includes(e))}e({tasks:h,isLoading:!1})}catch(s){console.error("Error fetching tasks:",s),e({error:s.message||"Failed to fetch tasks",isLoading:!1})}},300);return{tasks:[],isLoading:!1,error:null,taskGroups:[],statusSummary:null,projectFilter:"",statusFilter:"",groupFilter:"",assigneeFilter:"",searchQuery:"",viewMode:"list",fetchTasks:async()=>{try{e(e=>({...e,isLoading:!0,error:null}));let{projectFilter:t,statusFilter:a,groupFilter:i,assigneeFilter:d,searchQuery:n}=s(),o=new URLSearchParams;t&&o.append("projectId",t),a&&o.append("status",a),i&&o.append("taskGroup",i),d&&o.append("assignedTo",d);let c=l.s.TASK.base;t&&!d&&(c=l.s.TASK.byProject(t)),d&&!t&&(c=l.s.TASK.byUser(d));let m=o.toString(),u=m?`${c}?${m}`:c,{data:x,error:p}=await (0,r.A)("GET",u);if(p)throw Error(p);let h=x||[];if(n&&h.length>0){let e=n.toLowerCase();h=h.filter(s=>s.title.toLowerCase().includes(e)||s.description.toLowerCase().includes(e))}e(e=>({...e,tasks:h,isLoading:!1}))}catch(s){console.error("Error fetching tasks:",s),e(e=>({...e,error:s.message||"Failed to fetch tasks",isLoading:!1}))}},fetchTaskGroups:async s=>{try{e(e=>({...e,isLoading:!0}));let t=s?`${l.s.TASK.groups}?projectId=${s}`:l.s.TASK.groups,{data:a,error:i}=await (0,r.A)("GET",t);if(i)throw Error(i);e(e=>({...e,taskGroups:a||[],isLoading:!1}))}catch(s){console.error("Error fetching task groups:",s),e(e=>({...e,error:s.message||"Failed to fetch task groups",isLoading:!1}))}},fetchStatusSummary:async(s,t)=>{try{let a=l.s.TASK.statusSummary,i=new URLSearchParams;s&&i.append("projectId",s),t&&i.append("userId",t);let d=i.toString();d&&(a+=`?${d}`);let{data:n,error:o}=await (0,r.A)("GET",a);if(o)throw Error(o);e(e=>({...e,statusSummary:n||null}))}catch(s){console.error("Error fetching status summary:",s),e(e=>({...e,error:s.message||"Failed to fetch status summary"}))}},getTask:async s=>{try{e(e=>({...e,isLoading:!0,error:null}));let{data:t,error:a}=await (0,r.A)("GET",l.s.TASK.byId(s));if(e(e=>({...e,isLoading:!1})),a)throw Error(a);return t}catch(s){return console.error("Error fetching task:",s),e(e=>({...e,error:s.message||"Failed to fetch task",isLoading:!1})),null}},createTask:async s=>{try{e(e=>({...e,isLoading:!0,error:null}));let{data:t,error:a}=await (0,r.A)("POST",l.s.TASK.base,s);if(a)throw Error(a);return t?e(e=>({...e,tasks:[t,...e.tasks],isLoading:!1})):e(e=>({...e,isLoading:!1})),{data:t,error:null}}catch(s){return console.error("Error creating task:",s),e(e=>({...e,error:s.message||"Failed to create task",isLoading:!1})),{data:null,error:s.message||"Failed to create task"}}},updateTask:async(t,a)=>{try{console.log("Updating task in store:",t,a),e(e=>({...e,tasks:e.tasks.map(e=>e.id===t?{...e,...a}:e)}));let{data:i,error:d}=await (0,r.A)("PATCH",l.s.TASK.byId(t),a);if(d)throw await s().fetchTasks(),Error(d);return i&&e(e=>({...e,tasks:e.tasks.map(e=>e.id===t?{...e,...i}:e)})),{data:i,error:null}}catch(s){return console.error("Error updating task:",s),e(e=>({...e,error:s.message||"Failed to update task"})),{data:null,error:s.message||"Failed to update task"}}},updateTaskGroup:async(t,a)=>{try{e(e=>({...e,tasks:e.tasks.map(e=>e.id===t?{...e,task_group:a}:e)}));let{data:i,error:d}=await (0,r.A)("PATCH",l.s.TASK.byId(t),{task_group:a});if(d)throw await s().fetchTasks(),Error(d);return{error:null}}catch(s){return console.error("Error updating task group:",s),e(e=>({...e,error:s.message||"Failed to update task group"})),{error:s.message||"Failed to update task group"}}},deleteTask:async t=>{try{let a=[...s().tasks];e(e=>({...e,tasks:e.tasks.filter(e=>e.id!==t)}));let{error:i}=await (0,r.A)("DELETE",l.s.TASK.byId(t));if(i)throw e(e=>({...e,tasks:a})),Error(i);return{error:null}}catch(s){return console.error("Error deleting task:",s),e(e=>({...e,error:s.message||"Failed to delete task"})),{error:s.message||"Failed to delete task"}}},batchAssignTasks:async(s,t)=>{try{e(e=>({...e,isLoading:!0,error:null}));let{error:a}=await (0,r.A)("PATCH",l.s.TASK.batchAssign(t),{taskIds:s,action:"assign"});if(a)throw Error(a);return e(e=>({...e,tasks:e.tasks.map(e=>s.includes(e.id)?{...e,assigned_to:t}:e),isLoading:!1})),{error:null}}catch(s){return console.error("Error assigning tasks:",s),e(e=>({...e,error:s.message||"Failed to assign tasks",isLoading:!1})),{error:s.message||"Failed to assign tasks"}}},batchUnassignTasks:async t=>{try{e(e=>({...e,isLoading:!0,error:null}));let a=s().tasks.find(e=>e.assigned_to&&t.includes(e.id));if(!a||!a.assigned_to)throw Error("No assigned user found for these tasks");let{error:i}=await (0,r.A)("PATCH",l.s.TASK.batchAssign(a.assigned_to),{taskIds:t,action:"unassign"});if(i)throw Error(i);return e(e=>({...e,tasks:e.tasks.map(e=>t.includes(e.id)?{...e,assigned_to:null}:e),isLoading:!1})),{error:null}}catch(s){return console.error("Error unassigning tasks:",s),e(e=>({...e,error:s.message||"Failed to unassign tasks",isLoading:!1})),{error:s.message||"Failed to unassign tasks"}}},setProjectFilter:s=>{e(e=>({...e,projectFilter:s})),t()},setStatusFilter:s=>{e(e=>({...e,statusFilter:s})),t()},setGroupFilter:s=>{e(e=>({...e,groupFilter:s})),t()},setAssigneeFilter:s=>{e(e=>({...e,assigneeFilter:s})),t()},setSearchQuery:s=>{e(e=>({...e,searchQuery:s})),t()},setViewMode:s=>e(e=>({...e,viewMode:s})),clearTasks:()=>e(e=>({...e,tasks:[]})),clearError:()=>e(e=>({...e,error:null}))}})},82005:(e,s,t)=>{t.d(s,{L:()=>l});var a=t(43210),r=t(69021),i=t(71702);function l(){let[e,s]=(0,a.useState)(!1),{createTask:t,updateTask:l,deleteTask:d,updateTaskGroup:n,batchAssignTasks:o,batchUnassignTasks:c}=(0,r.d)(),m=(0,a.useCallback)(async e=>{s(!0);try{let{data:s,error:a}=await t({...e,assigned_to:e.assigned_to??null});if(a)return(0,i.oR)({title:"Error",description:a,variant:"destructive"}),null;return(0,i.oR)({title:"Success",description:"Task created successfully"}),s}catch(e){return(0,i.oR)({title:"Error",description:"Failed to create task",variant:"destructive"}),null}finally{s(!1)}},[t]),u=(0,a.useCallback)(async(e,t)=>{s(!0);try{console.log("Updating task:",e,t);let{data:s,error:a}=await l(e,t);if(a)return console.error("Error from API:",a),(0,i.oR)({title:"Error",description:a,variant:"destructive"}),null;return t.status||(0,i.oR)({title:"Success",description:"Task updated successfully"}),s}catch(e){return console.error("Exception in handleUpdateTask:",e),(0,i.oR)({title:"Error",description:e.message||"Failed to update task",variant:"destructive"}),null}finally{s(!1)}},[l,i.oR]),x=(0,a.useCallback)(async e=>{s(!0);try{let{error:s}=await d(e);if(s)return(0,i.oR)({title:"Error",description:s,variant:"destructive"}),!1;return(0,i.oR)({title:"Success",description:"Task deleted successfully"}),!0}catch(e){return(0,i.oR)({title:"Error",description:"Failed to delete task",variant:"destructive"}),!1}finally{s(!1)}},[d]),p=(0,a.useCallback)(async(e,t)=>{s(!0);try{let{error:s}=await n(e,t);if(s)return(0,i.oR)({title:"Error",description:s,variant:"destructive"}),!1;return!0}catch(e){return(0,i.oR)({title:"Error",description:"Failed to update task group",variant:"destructive"}),!1}finally{s(!1)}},[n]);return{isProcessing:e,handleCreateTask:m,handleUpdateTask:u,handleDeleteTask:x,handleUpdateTaskGroup:p,handleBatchAssign:(0,a.useCallback)(async(e,t)=>{s(!0);try{let{error:s}=await o(e,t);if(s)return(0,i.oR)({title:"Error",description:s,variant:"destructive"}),!1;return(0,i.oR)({title:"Success",description:`${e.length} tasks assigned successfully`}),!0}catch(e){return(0,i.oR)({title:"Error",description:"Failed to assign tasks",variant:"destructive"}),!1}finally{s(!1)}},[o]),handleBatchUnassign:(0,a.useCallback)(async e=>{s(!0);try{let{error:s}=await c(e);if(s)return(0,i.oR)({title:"Error",description:s,variant:"destructive"}),!1;return(0,i.oR)({title:"Success",description:`${e.length} tasks unassigned successfully`}),!0}catch(e){return(0,i.oR)({title:"Error",description:"Failed to unassign tasks",variant:"destructive"}),!1}finally{s(!1)}},[c])}}},88233:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(62688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},93551:(e,s,t)=>{t.d(s,{u:()=>J});var a=t(60687),r=t(43210),i=t(65822),l=t(48730),d=t(5336),n=t(92241),o=t(82005),c=t(71702),m=t(34735),u=t(25354),x=t(24934),p=t(55629),h=t(60),g=t(93661),f=t(63143),b=t(58869),j=t(88233);function y({task:e,statusIcons:s,statusColors:t,handleStatusChange:r,handleEditClick:o,handleDelete:c,getPriorityBadge:m,isAdmin:u}){let y=e=>e&&e in s?s[e]:s.Pending;return(0,a.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-pink-500/10 dark:from-indigo-950 dark:via-purple-950 dark:to-pink-950 p-6 border-b",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:y(e.status)}),(0,a.jsx)(n.qp,{className:"text-xl font-semibold tracking-tight",children:e.title})]})}),e.project&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground ml-8",children:[(0,a.jsx)("span",{className:"text-sm",children:"Project:"}),(0,a.jsxs)(x.$,{variant:"link",className:"p-0 h-auto text-sm font-medium flex items-center gap-1",children:[e.project.title,(0,a.jsx)(h.A,{className:"h-3 w-3"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-4 ml-8",children:[(0,a.jsxs)(p.rI,{children:[(0,a.jsx)(p.ty,{asChild:!0,children:(0,a.jsxs)(x.$,{variant:"outline",size:"sm",className:"h-8 gap-1.5 bg-white/80 dark:bg-black/20 backdrop-blur-sm",children:[y(e.status),(0,a.jsx)("span",{children:e.status})]})}),(0,a.jsxs)(p.SQ,{align:"end",className:"w-48",children:[(0,a.jsxs)(p._2,{onClick:()=>r("Pending"),className:"gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-slate-500"}),"Pending"]}),(0,a.jsxs)(p._2,{onClick:()=>r("In Progress"),className:"gap-2",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 text-blue-500"}),"In Progress"]}),(0,a.jsxs)(p._2,{onClick:()=>r("QA"),className:"gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-purple-500"}),"QA"]}),(0,a.jsxs)(p._2,{onClick:()=>r("Open"),className:"gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-slate-500"}),"Open"]}),(0,a.jsxs)(p._2,{onClick:()=>r("Completed"),className:"gap-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-green-500"}),"Completed"]}),(0,a.jsxs)(p._2,{onClick:()=>r("Blocked"),className:"gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-red-500"}),"Blocked"]})]})]}),e.priority&&m(e.priority),(0,a.jsx)("div",{className:"flex-grow"}),u&&(0,a.jsxs)(p.rI,{children:[(0,a.jsx)(p.ty,{asChild:!0,children:(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(p.SQ,{align:"end",className:"w-48",children:[(0,a.jsxs)(p._2,{className:"gap-2",onClick:o,children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),"Edit Task"]}),(0,a.jsxs)(p._2,{className:"gap-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),"Assign Task"]}),(0,a.jsx)(p.mB,{}),(0,a.jsxs)(p._2,{className:"text-red-600 gap-2",onClick:c,children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),"Delete Task"]})]})]})]})]})}var v=t(9890),k=t(58887);function N({activeTab:e,setActiveTab:s,commentsCount:t,relatedTasksCount:r}){return(0,a.jsx)("div",{className:"border-b mb-4",children:(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("button",{onClick:()=>s("details"),className:`relative pb-2 text-sm font-medium transition-colors ${"details"===e?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Details"})]}),"details"===e&&(0,a.jsx)(v.P.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]}),(0,a.jsxs)("button",{onClick:()=>s("comments"),className:`relative pb-2 text-sm font-medium transition-colors ${"comments"===e?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Comments (",t,")"]})]}),"comments"===e&&(0,a.jsx)(v.P.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]}),(0,a.jsxs)("button",{onClick:()=>s("activity"),className:`relative pb-2 text-sm font-medium transition-colors ${"activity"===e?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Activity"})]}),"activity"===e&&(0,a.jsx)(v.P.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]}),(0,a.jsxs)("button",{onClick:()=>s("related"),className:`relative pb-2 text-sm font-medium transition-colors ${"related"===e?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Related (",r,")"]})]}),"related"===e&&(0,a.jsx)(v.P.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]})]})})}var w=t(68988),A=t(39390),T=t(33135),_=t(63974),C=t(15616),S=t(56924),E=t(70373),F=t(40228),L=t(85650),P=t(96241);function R({isEditMode:e,localTask:s,editedTask:t,setEditedTask:r,handleCancelEdit:i,handleSaveEdit:l,teamMembers:d,isLoadingTeamMembers:n,getInitials:o}){return e?(0,a.jsxs)("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-5 shadow-sm space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"title",children:"Task Title"}),(0,a.jsx)(w.p,{id:"title",value:t?.title||"",onChange:e=>{t&&r({...t,title:e.target.value})},placeholder:"Enter task title"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(C.T,{id:"description",value:t?.description||"",onChange:e=>{t&&r({...t,description:e.target.value})},placeholder:"Enter task description",className:"min-h-[100px] resize-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"priority",children:"Priority"}),(0,a.jsxs)(_.l6,{value:t?.priority||"",onValueChange:e=>{t&&r({...t,priority:e})},children:[(0,a.jsx)(_.bq,{id:"priority",children:(0,a.jsx)(_.yv,{placeholder:"Select priority"})}),(0,a.jsxs)(_.gC,{children:[(0,a.jsx)(_.eb,{value:"Low",children:"Low"}),(0,a.jsx)(_.eb,{value:"Medium",children:"Medium"}),(0,a.jsx)(_.eb,{value:"High",children:"High"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"task_group",children:"Group"}),(0,a.jsxs)(_.l6,{value:t?.task_group||"",onValueChange:e=>{t&&r({...t,task_group:e})},children:[(0,a.jsx)(_.bq,{id:"task_group",children:(0,a.jsx)(_.yv,{placeholder:"Select group"})}),(0,a.jsxs)(_.gC,{children:[(0,a.jsx)(_.eb,{value:"Backlog",children:"Backlog"}),(0,a.jsx)(_.eb,{value:"To Do",children:"To Do"}),(0,a.jsx)(_.eb,{value:"In Progress",children:"In Progress"}),(0,a.jsx)(_.eb,{value:"Review",children:"Review"}),(0,a.jsx)(_.eb,{value:"Done",children:"Done"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"assigned_to",children:"Assign To"}),(0,a.jsxs)(_.l6,{value:t?.assigned_to||"",onValueChange:e=>{t&&r({...t,assigned_to:e})},children:[(0,a.jsx)(_.bq,{id:"assigned_to",disabled:n,children:(0,a.jsx)(_.yv,{placeholder:n?"Loading team members...":"Select team member"})}),(0,a.jsx)(_.gC,{children:d&&d?.length>0?d?.map(e=>a.jsx(_.eb,{value:e.id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(E.eu,{className:"h-6 w-6",children:[a.jsx(E.BK,{src:e.profile_image||void 0,alt:e.user_name}),a.jsx(E.q5,{className:"text-xs bg-gradient-to-br from-indigo-500 to-purple-600 text-white",children:o(e.user_name)})]}),a.jsx("span",{children:e.user_name})]})},e.id)):(0,a.jsx)(_.eb,{value:"no-members",children:"No team members available"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"due_date",children:"Due Date"}),(0,a.jsxs)(T.AM,{children:[(0,a.jsx)(T.Wv,{asChild:!0,children:(0,a.jsxs)(x.$,{variant:"outline",className:(0,P.cn)("w-full justify-start text-left font-normal",!t?.due_date&&"text-muted-foreground"),children:[(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4"}),t?.due_date?(0,L.GP)(new Date(t.due_date),"PPP"):"Select a date"]})}),(0,a.jsx)(T.hl,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(S.V,{mode:"single",selected:t?.due_date?new Date(t.due_date):void 0,onSelect:e=>{t&&r({...t,due_date:e?.toISOString()||null})},initialFocus:!0})})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(x.$,{variant:"outline",onClick:i,children:"Cancel"}),(0,a.jsx)(x.$,{onClick:l,children:"Save Changes"})]})]}):(0,a.jsxs)("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-5 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Description"}),(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(0,a.jsx)("p",{className:"text-foreground whitespace-pre-line",children:s.description})})]})}function I({comments:e,setComments:s,getInitials:t,formatRelativeTime:i}){let[l,d]=(0,r.useState)("");return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-4 shadow-sm",children:(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),l.trim()&&(s([...e,{id:`comment-${Date.now()}`,author:"You",content:l,created_at:new Date().toISOString(),author_avatar:null}]),d(""))},className:"space-y-3",children:[(0,a.jsx)(C.T,{placeholder:"Add a comment...",value:l,onChange:e=>d(e.target.value),className:"min-h-[100px] resize-none bg-transparent border-muted"}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(x.$,{type:"submit",disabled:!l.trim(),size:"sm",className:"gap-1.5",children:[(0,a.jsx)(k.A,{className:"h-3.5 w-3.5"}),"Post Comment"]})})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.map(e=>(0,a.jsx)(v.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(E.eu,{className:"h-8 w-8 border",children:[(0,a.jsx)(E.BK,{src:e.author_avatar||void 0,alt:e.author}),(0,a.jsx)(E.q5,{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white text-xs",children:t(e.author)})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.author}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:i(e.created_at)})]}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-line",children:e.content})]})]})},e.id)),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-4",children:[(0,a.jsx)(k.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"font-medium",children:"No comments yet"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Be the first to comment on this task"})]})]})]})}var D=t(59821);function M({task:e,formatDate:s}){return(0,a.jsx)("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative pl-6 border-l-2 border-muted pb-1",children:[(0,a.jsx)("div",{className:"absolute w-3 h-3 bg-blue-500 rounded-full -left-[7px] top-1"}),(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Sarah Miller"})," changed the status to"," ",(0,a.jsx)(D.E,{variant:"outline",className:"bg-blue-50 text-blue-700 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"In Progress"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Yesterday at 2:30 PM"})]})]}),(0,a.jsxs)("div",{className:"relative pl-6 border-l-2 border-muted pb-1",children:[(0,a.jsx)("div",{className:"absolute w-3 h-3 bg-green-500 rounded-full -left-[7px] top-1"}),(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Alex Johnson"})," assigned this task to"," ",(0,a.jsx)("span",{className:"font-medium",children:"Sarah Miller"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"2 days ago"})]})]}),(0,a.jsxs)("div",{className:"relative pl-6 border-l-2 border-muted",children:[(0,a.jsx)("div",{className:"absolute w-3 h-3 bg-purple-500 rounded-full -left-[7px] top-1"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Alex Johnson"})," created this task"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:s(e.created_at)})]})]})]})})}function $({relatedTasks:e,statusIcons:s,setLocalTask:t,setActiveTab:r,getInitials:l}){let d=e=>e?s[e]:null;return(0,a.jsx)("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-4 shadow-sm",children:(0,a.jsx)("div",{className:"space-y-3",children:e.length>0?e.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-md border hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>{t(e),r("details")},children:[(0,a.jsx)("div",{className:"mt-0.5 flex-shrink-0",children:d(e.status)||(0,a.jsx)(i.A,{className:"h-4 w-4 text-slate-500"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(D.E,{variant:"outline",className:"text-xs px-1.5 py-0 border-muted-foreground/30",children:e.task_group}),e.assignee&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(E.eu,{className:"h-4 w-4",children:(0,a.jsx)(E.q5,{className:"text-[8px]",children:l(e.assignee.user_name)})}),(0,a.jsx)("span",{className:"text-xs",children:e.assignee.user_name})]})]})]})]},e.id)):(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No related tasks found"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"This task is the only one in the project or no project is assigned."})]})})})}var U=t(7965);function z({task:e,statusColors:s,getPriorityBadge:t,getInitials:r,formatDate:l,relatedTasks:d,statusIcons:n,setLocalTask:o,setActiveTab:c}){let m=e=>e?n[e]:null;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-4 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Task Details"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),(0,a.jsx)(D.E,{className:`${s[e.status]||s.Pending} px-2 py-0.5`,children:e.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Priority"}),e.priority?t(e.priority):(0,a.jsx)("span",{className:"text-xs italic text-muted-foreground",children:"Not set"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Assigned To"}),e.assignee?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(E.eu,{className:"h-6 w-6 border",children:[(0,a.jsx)(E.BK,{src:e.assignee.profile_image||void 0,alt:e.assignee.user_name}),(0,a.jsx)(E.q5,{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white text-xs",children:r(e.assignee.user_name)})]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.assignee.user_name})]}):(0,a.jsx)("p",{className:"text-xs italic text-muted-foreground",children:"Unassigned"})]}),(0,a.jsx)(U.w,{className:"my-2"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Created"}),(0,a.jsx)("p",{className:"text-sm",children:l(e.created_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Updated"}),(0,a.jsx)("p",{className:"text-sm",children:l(e.updated_at)})]})]}),e.due_date&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Due Date"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(F.A,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm",children:l(e.due_date)})]})]}),e.task_group&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Group"}),(0,a.jsx)(D.E,{variant:"outline",className:"mt-1 font-normal",children:e.task_group})]})]})]}),d.length>0&&(0,a.jsxs)("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm rounded-xl border p-4 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Related Tasks"}),(0,a.jsxs)("div",{className:"space-y-2",children:[d.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2 p-2 rounded-md transition-all hover:bg-black/5 dark:hover:bg-white/5 cursor-pointer group",onClick:()=>{o(e)},children:[(0,a.jsx)("div",{className:"mt-0.5 flex-shrink-0",children:m(e.status)||(0,a.jsx)(i.A,{className:"h-4 w-4 text-slate-500"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-sm truncate group-hover:text-primary transition-colors",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.description})]})]},e.id)),d.length>3&&(0,a.jsxs)(x.$,{variant:"ghost",size:"sm",className:"w-full mt-1 text-xs h-7",onClick:()=>c("related"),children:["View all ",d.length," related tasks"]})]})]})]})}var K=t(46677);let B={Pending:(0,a.jsx)(i.A,{className:"h-5 w-5 text-slate-500"}),"In Progress":(0,a.jsx)(l.A,{className:"h-5 w-5 text-blue-500"}),QA:(0,a.jsx)(i.A,{className:"h-5 w-5 text-purple-500"}),Open:(0,a.jsx)(i.A,{className:"h-5 w-5 text-slate-500"}),Completed:(0,a.jsx)(d.A,{className:"h-5 w-5 text-green-500"}),Blocked:(0,a.jsx)(i.A,{className:"h-5 w-5 text-red-500"})},G={Pending:"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-100","In Progress":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100",QA:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100",Open:"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-100",Completed:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",Blocked:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100"};function J({task:e,isOpen:s,onClose:t,onStatusChange:i,relatedTasks:l=[],handleUpdateTask:d,onTaskUpdate:x}){let[p,h]=(0,r.useState)(null),[g,f]=(0,r.useState)("details"),[b,j]=(0,r.useState)([{id:"comment-1",author:"Alex Johnson",content:"I've started working on this task. Should be completed by tomorrow.",created_at:new Date(Date.now()-864e5).toISOString(),author_avatar:null},{id:"comment-2",author:"Sarah Miller",content:"Let me know if you need any design assets for this.",created_at:new Date(Date.now()-432e5).toISOString(),author_avatar:null}]),{handleDeleteTask:v}=(0,o.L)(),{toast:k}=(0,c.dj)(),[w,A]=(0,r.useState)(!1),[T,_]=(0,r.useState)(null),[C,S]=(0,r.useState)(),[E,F]=(0,r.useState)(!1),{user:L}=(0,u.n)(),P=L?.role==="admin",D=async()=>{if(!C){F(!0);try{let{data:e,error:s}=await (0,m.A)("GET",K.s.AUTH.allTeamMember);s?(console.error("Error fetching team members:",s),k({title:"Error",description:"Failed to load team members. Using default options.",variant:"destructive"})):e&&e.team_members&&e.team_members.length>0&&S(e.team_members)}catch(e){console.error("Error fetching team members:",e)}finally{F(!1)}}},U=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase():"U",J=e=>{if(!e)return"Not set";let s=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)},q=async e=>{if(p)try{h({...p,status:e}),await i(p.id,e),k({title:"Status Updated",description:`Task status changed to ${e}`})}catch(e){console.error("Error updating task status:",e),p&&h({...p,status:p.status}),k({title:"Error",description:"Failed to update task status",variant:"destructive"})}},O=async()=>{p&&await v(p.id)&&(document.body.style.pointerEvents="",t())},H=async()=>{if(T)try{console.log("Saving task edits:",T),h(T);let e={title:T.title,description:T.description,priority:T.priority,due_date:T.due_date,task_group:T.task_group,assigned_to:T.assigned_to},s=await d(T.id,e);if(!s)throw Error("Failed to update task");A(!1),x&&x(s),k({title:"Success",description:"Task updated successfully"})}catch(e){console.error("Error updating task:",e),k({title:"Error",description:"Failed to update task. Please try again.",variant:"destructive"}),p&&_(p)}},V=()=>{document.body.style.pointerEvents="",t()};if(!p)return null;let Q=e=>e?(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${{Low:"bg-emerald-50 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800",Medium:"bg-amber-50 text-amber-700 dark:bg-amber-950 dark:text-amber-300 border-amber-200 dark:border-amber-800",High:"bg-rose-50 text-rose-700 dark:bg-rose-950 dark:text-rose-300 border-rose-200 dark:border-rose-800"}[e]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"}`,children:e}):null;return(0,a.jsx)(n.cj,{open:s,onOpenChange:e=>!e&&V(),children:(0,a.jsx)(n.h,{className:"w-full sm:max-w-xl md:max-w-2xl lg:max-w-3xl overflow-y-auto p-0",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)(y,{task:p,statusIcons:B,statusColors:G,handleStatusChange:q,handleEditClick:()=>{p&&_({...p}),A(!0),D()},handleDelete:O,getPriorityBadge:Q,isAdmin:P}),(0,a.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,a.jsx)("div",{className:"p-6 space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsx)(N,{activeTab:g,setActiveTab:f,commentsCount:b.length,relatedTasksCount:l.length}),"details"===g&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(R,{isEditMode:w,localTask:p,editedTask:T,setEditedTask:_,handleCancelEdit:()=>{A(!1),_(null)},handleSaveEdit:H,teamMembers:C,isLoadingTeamMembers:E,getInitials:U})}),"comments"===g&&(0,a.jsx)(I,{comments:b,setComments:j,getInitials:U,formatRelativeTime:e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/1e3);return t<60?`${t} seconds ago`:t<3600?`${Math.floor(t/60)} minutes ago`:t<86400?`${Math.floor(t/3600)} hours ago`:t<604800?`${Math.floor(t/86400)} days ago`:J(e)}}),"activity"===g&&(0,a.jsx)(M,{task:p,formatDate:J}),"related"===g&&(0,a.jsx)($,{relatedTasks:l,statusIcons:B,setLocalTask:h,setActiveTab:f,getInitials:U})]}),(0,a.jsx)(z,{task:p,statusColors:G,getPriorityBadge:Q,getInitials:U,formatDate:J,relatedTasks:l,statusIcons:B,setLocalTask:h,setActiveTab:f})]})})})]})})})}},93661:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(62688).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])}};