(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8905],{1482:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(19946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},17580:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(19946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},34477:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{callServer:function(){return s.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return a.findSourceMapURL}});let s=t(53806),a=t(31818),n=t(34979).createServerReference},35695:(e,r,t)=>{"use strict";var s=t(18999);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},38660:(e,r,t)=>{Promise.resolve().then(t.bind(t,81169))},40646:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(19946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},45074:(e,r,t)=>{"use strict";t.d(r,{U:()=>h});var s=t(95155),a=t(66997),n=t(62525),i=t(17580),l=t(40646),o=t(69074),d=t(35695),c=t(88145),u=t(97168),m=t(88482),p=t(81347);function h(e){var r,t,h;let{project:x,onDelete:g,isDeleting:f}=e,y=(0,d.useRouter)(),{user:j}=(0,p.n)(),v=null==j?void 0:j.role;return(0,s.jsx)(a.P.div,{whileHover:{y:-5,transition:{duration:.2}},children:(0,s.jsxs)(m.Zp,{className:"overflow-hidden cursor-pointer relative group border-border/40 bg-gradient-to-b from-white to-slate-50/50 dark:from-slate-900 dark:to-slate-800/50 shadow-sm hover:shadow-md transition-all duration-300",onClick:()=>y.push("/app/projects/".concat(x.id)),children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600 z-10 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,s.jsxs)("div",{className:"p-3 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex-1 pr-4",children:[(0,s.jsx)("h3",{className:"text-base font-semibold truncate",children:x.title}),("admin"===v||"team_member"===v)&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[x.total_tasks||0," tasks â€¢ ",x.completed_tasks||0," completed"]}),"customer"===v&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(x.created_at).toLocaleDateString()]})]}),"admin"===v&&(0,s.jsx)(u.$,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-red-500",onClick:e=>{e.stopPropagation(),g(x.id)},disabled:f,children:(0,s.jsx)(n.A,{className:"h-3.5 w-3.5"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,s.jsx)("span",{className:"text-muted-foreground font-medium",children:"Progress"}),(0,s.jsxs)("span",{className:"font-semibold",children:[x.progress_percentage||0,"%"]})]}),(0,s.jsx)("div",{className:"h-1 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-primary to-purple-600 rounded-full transition-all duration-500",style:{width:"".concat(x.progress_percentage||0,"%")}})}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-1 mt-1 border-t border-border/30 text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(c.E,{className:"".concat((t=x.progress_percentage)?t>=100?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100":t>50?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-100":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100"," px-1.5 py-0 text-[10px] font-medium"),children:(h=x.progress_percentage)?h>=100?"Completed":h>50?"In Progress":"Planning":"Planning"}),"team_member"===v&&(0,s.jsx)("div",{className:"flex items-center gap-1 ml-1",children:x.isTeamMember?(0,s.jsxs)(c.E,{variant:"outline",className:"px-1.5 py-0 text-[10px] font-medium border-primary/30 text-primary",children:[(0,s.jsx)(i.A,{className:"h-2.5 w-2.5 mr-0.5"}),"Team"]}):x.hasAssignedTasks&&(0,s.jsxs)(c.E,{variant:"outline",className:"px-1.5 py-0 text-[10px] font-medium border-purple-500/30 text-purple-500",children:[(0,s.jsx)(l.A,{className:"h-2.5 w-2.5 mr-0.5"}),"Tasks"]})}),"customer"!==v&&"team_member"!==v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-primary/80 to-purple-600/80 flex items-center justify-center text-white text-[10px] font-bold ml-1",children:"admin"===v&&x.customer_id===j.id?"S":x.customer_name?x.customer_name.charAt(0).toUpperCase():"P"}),(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground truncate max-w-[60px]",children:"admin"===v&&x.customer_id===j.id?"Self":x.customer_name||"Project"})]})]}),x.start_date&&x.duration_days&&(0,s.jsxs)("div",{className:"flex items-center text-[10px] text-muted-foreground",children:[(0,s.jsx)(o.A,{className:"h-3 w-3 mr-1"}),(0,s.jsx)("span",{children:null===(r=((e,r)=>{if(!e||!r)return null;let t=new Date(e);return t.setDate(t.getDate()+r),t})(x.start_date,x.duration_days))||void 0===r?void 0:r.toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})]})]})]})]})})}},47924:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(19946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},62525:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(19946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},67133:(e,r,t)=>{"use strict";t.d(r,{SQ:()=>m,_2:()=>p,lp:()=>h,mB:()=>x,rI:()=>c,ty:()=>u});var s=t(95155),a=t(12115),n=t(48698),i=t(13052),l=t(5196),o=t(9428),d=t(53999);let c=n.bL,u=n.l9;n.YJ,n.ZL,n.Pb,n.z6,a.forwardRef((e,r)=>{let{className:t,inset:a,children:l,...o}=e;return(0,s.jsxs)(n.ZP,{ref:r,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",t),...o,children:[l,(0,s.jsx)(i.A,{className:"ml-auto"})]})}).displayName=n.ZP.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.G5,{ref:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}).displayName=n.G5.displayName;let m=a.forwardRef((e,r)=>{let{className:t,sideOffset:a=4,...i}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:r,sideOffset:a,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})});m.displayName=n.UC.displayName;let p=a.forwardRef((e,r)=>{let{className:t,inset:a,...i}=e;return(0,s.jsx)(n.q7,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",t),...i})});p.displayName=n.q7.displayName,a.forwardRef((e,r)=>{let{className:t,children:a,checked:i,...o}=e;return(0,s.jsxs)(n.H_,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:i,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})}),a]})}).displayName=n.H_.displayName,a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e;return(0,s.jsxs)(n.hN,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=n.hN.displayName;let h=a.forwardRef((e,r)=>{let{className:t,inset:a,...i}=e;return(0,s.jsx)(n.JU,{ref:r,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...i})});h.displayName=n.JU.displayName;let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.wv,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...a})});x.displayName=n.wv.displayName},69074:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(19946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},81169:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>k});var s=t(95155),a=t(12115),n=t(35695),i=t(66997),l=t(81347),o=t(33223),d=t(53580),c=t(84616),u=t(97168);function m(e){let{userRole:r}=e,t=(0,n.useRouter)();return(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-medium tracking-tight",children:"Projects"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your development projects efficiently"})]}),("admin"===r||"customer"===r)&&(0,s.jsxs)(u.$,{onClick:()=>t.push("/app/projects/new"),size:"sm",className:"gap-1.5 bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90 shadow-sm",children:[(0,s.jsx)(c.A,{className:"h-3.5 w-3.5"}),"New Project"]})]})}var p=t(47924),h=t(1482),x=t(17580);let g=(0,t(19946).A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var f=t(67133),y=t(89852);function j(e){let{searchQuery:r,onSearchChange:t,onSubmit:a,setStatusFilter:n,setRelationshipFilter:i,setSortOrder:l,userRole:o}=e;return(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[(0,s.jsxs)("form",{onSubmit:a,className:"relative flex-1 min-w-[200px] max-w-xs",children:[(0,s.jsx)(p.A,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),(0,s.jsx)(y.p,{type:"search",placeholder:"Search projects...",className:"pl-7 h-8 text-sm bg-background",value:r,onChange:t,onClick:e=>e.stopPropagation()})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(f.rI,{children:[(0,s.jsx)(f.ty,{asChild:!0,children:(0,s.jsxs)(u.$,{variant:"outline",size:"sm",className:"h-8 text-xs gap-1.5",children:[(0,s.jsx)(h.A,{className:"h-3.5 w-3.5"}),"Status"]})}),(0,s.jsxs)(f.SQ,{children:[(0,s.jsx)(f._2,{onClick:()=>n("all"),children:"All Statuses"}),(0,s.jsx)(f._2,{onClick:()=>n("Planning"),children:"Planning"}),(0,s.jsx)(f._2,{onClick:()=>n("In Progress"),children:"In Progress"}),(0,s.jsx)(f._2,{onClick:()=>n("Completed"),children:"Completed"})]})]}),"team_member"===o&&(0,s.jsxs)(f.rI,{children:[(0,s.jsx)(f.ty,{asChild:!0,children:(0,s.jsxs)(u.$,{variant:"outline",size:"sm",className:"h-8 text-xs gap-1.5",children:[(0,s.jsx)(x.A,{className:"h-3.5 w-3.5"}),"Relationship"]})}),(0,s.jsxs)(f.SQ,{children:[(0,s.jsx)(f._2,{onClick:()=>i("all"),children:"All Projects"}),(0,s.jsx)(f._2,{onClick:()=>i("team"),children:"Team Member"}),(0,s.jsx)(f._2,{onClick:()=>i("tasks"),children:"Assigned Tasks"})]})]}),(0,s.jsxs)(f.rI,{children:[(0,s.jsx)(f.ty,{asChild:!0,children:(0,s.jsxs)(u.$,{variant:"outline",size:"sm",className:"h-8 text-xs gap-1.5",children:[(0,s.jsx)(g,{className:"h-3.5 w-3.5"}),"Sort"]})}),(0,s.jsxs)(f.SQ,{children:[(0,s.jsx)(f._2,{onClick:()=>l("newest"),children:"Newest First"}),(0,s.jsx)(f._2,{onClick:()=>l("oldest"),children:"Oldest First"}),(0,s.jsx)(f.mB,{}),(0,s.jsx)(f._2,{onClick:()=>l("progress-high"),children:"Progress (High to Low)"}),(0,s.jsx)(f._2,{onClick:()=>l("progress-low"),children:"Progress (Low to High)"})]})]})]})]})}var v=t(45074),w=t(92286);function b(){return(0,s.jsxs)("div",{className:"space-y-8 animate-pulse",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"h-8 bg-muted rounded-md w-1/3"}),(0,s.jsx)("div",{className:"h-10 bg-muted rounded-md w-32"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-10 bg-muted rounded-md w-64"}),(0,s.jsx)("div",{className:"h-10 bg-muted rounded-md w-32"}),(0,s.jsx)("div",{className:"h-10 bg-muted rounded-md w-32"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>(0,s.jsx)("div",{className:"h-64 bg-muted rounded-lg"},e))})]})}let N={hidden:{opacity:1},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}};function k(){let{fetchProjects:e,deleteProject:r,isLoading:t,error:c}=(0,o.b)(),{user:u}=(0,l.n)(),p=(0,n.useSearchParams)(),{toast:h}=(0,d.dj)(),[x,g]=(0,a.useState)([]),[f,y]=(0,a.useState)(!1),k=null==u?void 0:u.role,{searchQuery:A,setSearchQuery:_,statusFilter:P,setStatusFilter:S,sortOrder:C,setSortOrder:L,relationshipFilter:R,setRelationshipFilter:T,filterProjects:M}=function(){let[e,r]=(0,a.useState)(""),[t,s]=(0,a.useState)("all"),[n,i]=(0,a.useState)("newest"),[l,o]=(0,a.useState)("all"),d=e=>e>=100?"Completed":e>50?"In Progress":"Planning";return{searchQuery:e,setSearchQuery:r,statusFilter:t,setStatusFilter:s,sortOrder:n,setSortOrder:i,relationshipFilter:l,setRelationshipFilter:o,filterProjects:r=>r.filter(r=>("all"===t||d(r.progress_percentage||0)===t)&&("all"===l||("team"!==l||!!r.isTeamMember)&&("tasks"!==l||!!r.hasAssignedTasks))&&(!e||r.title.toLowerCase().includes(e.toLowerCase()))).sort((e,r)=>"newest"===n?new Date(r.created_at).getTime()-new Date(e.created_at).getTime():"oldest"===n?new Date(e.created_at).getTime()-new Date(r.created_at).getTime():"progress-high"===n?(r.progress_percentage||0)-(e.progress_percentage||0):"progress-low"===n?(e.progress_percentage||0)-(r.progress_percentage||0):0),getStatusText:d}}(),U=async()=>{try{let{data:r,error:t}=await e();if(t){h({title:"Error",description:t,variant:"destructive"});return}r&&g(r)}catch(e){console.error("Error loading projects:",e),h({title:"Error",description:"Failed to load projects. Please try again.",variant:"destructive"})}};(0,a.useEffect)(()=>{U()},[]),(0,a.useEffect)(()=>{_((null==p?void 0:p.get("q"))||"")},[p]);let z=async e=>{try{y(!0);let{error:t}=await r(e);if(t){h({title:"Error",description:t,variant:"destructive"});return}h({title:"Success",description:"Project deleted successfully"}),U()}catch(e){console.error("Error deleting project:",e),h({title:"Error",description:"Failed to delete project. Please try again.",variant:"destructive"})}finally{y(!1)}},F=M(x);return t&&0===x.length?(0,s.jsx)(b,{}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(m,{userRole:k}),(0,s.jsx)(j,{searchQuery:A,onSearchChange:e=>{_(e.target.value)},onSubmit:e=>{e.preventDefault()},setStatusFilter:S,setRelationshipFilter:T,setSortOrder:L,userRole:k}),F.length>0?(0,s.jsx)(i.P.div,{variants:N,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(e=>(0,s.jsx)(v.U,{project:e,onDelete:z,isDeleting:f},e.id))}):(0,s.jsx)(w.W,{searchQuery:A,userRole:k})]})}},81347:(e,r,t)=>{"use strict";t.d(r,{n:()=>o});var s=t(65453),a=t(6807),n=t(34477);let i=(0,n.createServerReference)("0078e71f6cc7e95d02d9cdc97ddb6eaa3edb2c55f8",n.callServer,void 0,n.findSourceMapURL,"getServerSideProfile");var l=t(53919);let o=(0,s.v)()((e,r)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,initialize:async()=>{try{e({isLoading:!0});let r=await i();if(r.success&&r.user)return e({user:r.user,isAuthenticated:!0,isLoading:!1,error:null}),!0;return e({user:null,isAuthenticated:!1,isLoading:!1,error:r.error||null}),!1}catch(r){return console.error("Failed to initialize auth:",r),e({user:null,isAuthenticated:!1,isLoading:!1}),!1}},signIn:async(r,t)=>{e({isLoading:!0,error:null});try{let{data:s,error:n}=await (0,a.A)("POST",l.s.AUTH.signIn,{email:r,password:t});if(n)return e({isLoading:!1,error:n}),{data:null,error:n};let o=await i();return o.success&&o.user?e({user:o.user,isAuthenticated:!0,isLoading:!1,error:null}):e({user:null==s?void 0:s.user,isAuthenticated:!0,isLoading:!1,error:null}),{data:s,error:null}}catch(t){console.error("Sign in error:",t);let r=t.message||"Failed to sign in. Please check your network connection and try again.";return e({isLoading:!1,error:r}),{data:null,error:r}}},signUp:async(r,t)=>{e({isLoading:!0,error:null});try{let{data:s,error:n}=await (0,a.A)("POST",l.s.AUTH.signUp,{email:r,user_name:t||r.split("@")[0]});if(n)return e({isLoading:!1,error:n}),{data:null,error:n};return e({isLoading:!1,error:null}),{data:s,error:null}}catch(t){console.error("Sign up error:",t);let r=t.message||"Failed to sign up";return e({isLoading:!1,error:r}),{data:null,error:r}}},verifyToken:async r=>{e({isLoading:!0,error:null});try{let{data:t,error:s}=await (0,a.A)("POST",l.s.AUTH.verifyToken,{token:r});if(e({isLoading:!1}),s)return{data:null,error:s};return{data:t,error:null}}catch(t){console.error("Token verification error:",t);let r=t.message||"Failed to verify token";return e({isLoading:!1}),{data:null,error:r}}},forgotPassword:async r=>{e({isLoading:!0,error:null});try{let{error:t}=await (0,a.A)("POST",l.s.AUTH.forgotPassword,{email:r});return e({isLoading:!1,error:t||null}),{error:t||null}}catch(t){console.error("Forgot password error:",t);let r=t.message||"Failed to process forgot password request";return e({isLoading:!1,error:r}),{error:r}}},resetPassword:async(r,t)=>{e({isLoading:!0,error:null});try{let{error:s}=await (0,a.A)("POST",l.s.AUTH.resetPassword,{token:r,password:t});return e({isLoading:!1,error:s||null}),{error:s||null}}catch(t){console.error("Reset password error:",t);let r=t.message||"Failed to reset password";return e({isLoading:!1,error:r}),{error:r}}},loadProfile:async()=>{try{e({isLoading:!0});let r=await i();r.success&&r.user?e({user:r.user,isAuthenticated:!0,isLoading:!1,error:null}):e({isAuthenticated:!1,user:null,isLoading:!1,error:r.error||null})}catch(r){console.error("Error loading profile:",r),e({isAuthenticated:!1,user:null,isLoading:!1,error:"Failed to load profile"})}},signOut:async()=>{e({isLoading:!0}),window.location.href="/login";try{let{error:r}=await (0,a.A)("POST",l.s.AUTH.signOut);e({user:null,isAuthenticated:!1}),window.location.href="/login"}catch(r){console.error("Sign out error:",r),e({user:null,isAuthenticated:!1}),window.location.href="/login"}finally{e({isLoading:!1})}},clearError:()=>e({error:null})}))},84616:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(19946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88482:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var s=t(95155),a=t(12115),n=t(53999);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},92286:(e,r,t)=>{"use strict";t.d(r,{W:()=>c});var s=t(95155),a=t(47924),n=t(84616),i=t(35695),l=t(97168),o=t(88482),d=t(66997);function c(e){let{searchQuery:r,userRole:t}=e,c=(0,i.useRouter)();return(0,s.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsx)(o.Zp,{children:(0,s.jsxs)(o.Wu,{className:"flex flex-col items-center justify-center py-10",children:[(0,s.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,s.jsx)(a.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No projects found"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center max-w-md mb-6",children:r?'No projects matching "'.concat(r,'"'):"Get started by creating your first project"}),("admin"===t||"customer"===t)&&(0,s.jsxs)(l.$,{onClick:()=>c.push("/app/projects/new"),className:"flex items-center",children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Create Project"]})]})})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[2848,5687,8138,8074,9550,7275,6997,4084,8441,1684,7358],()=>r(38660)),_N_E=e.O()}]);