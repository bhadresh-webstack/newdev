exports.id=8235,exports.ids=[8235],exports.modules={25023:(e,r,t)=>{Promise.resolve().then(t.bind(t,60342)),Promise.resolve().then(t.bind(t,92892)),Promise.resolve().then(t.bind(t,69794))},25354:(e,r,t)=>{"use strict";t.d(r,{n:()=>l});var s=t(26787),a=t(34735),o=t(6475);let i=(0,o.createServerReference)("0078e71f6cc7e95d02d9cdc97ddb6eaa3edb2c55f8",o.callServer,void 0,o.findSourceMapURL,"getServerSideProfile");var n=t(46677);let l=(0,s.v)()((e,r)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,initialize:async()=>{try{e({isLoading:!0});let r=await i();if(r.success&&r.user)return e({user:r.user,isAuthenticated:!0,isLoading:!1,error:null}),!0;return e({user:null,isAuthenticated:!1,isLoading:!1,error:r.error||null}),!1}catch(r){return console.error("Failed to initialize auth:",r),e({user:null,isAuthenticated:!1,isLoading:!1}),!1}},signIn:async(r,t)=>{e({isLoading:!0,error:null});try{let{data:s,error:o}=await (0,a.A)("POST",n.s.AUTH.signIn,{email:r,password:t});if(o)return e({isLoading:!1,error:o}),{data:null,error:o};let l=await i();return l.success&&l.user?e({user:l.user,isAuthenticated:!0,isLoading:!1,error:null}):e({user:s?.user,isAuthenticated:!0,isLoading:!1,error:null}),{data:s,error:null}}catch(t){console.error("Sign in error:",t);let r=t.message||"Failed to sign in. Please check your network connection and try again.";return e({isLoading:!1,error:r}),{data:null,error:r}}},signUp:async(r,t)=>{e({isLoading:!0,error:null});try{let{data:s,error:o}=await (0,a.A)("POST",n.s.AUTH.signUp,{email:r,user_name:t||r.split("@")[0]});if(o)return e({isLoading:!1,error:o}),{data:null,error:o};return e({isLoading:!1,error:null}),{data:s,error:null}}catch(t){console.error("Sign up error:",t);let r=t.message||"Failed to sign up";return e({isLoading:!1,error:r}),{data:null,error:r}}},verifyToken:async r=>{e({isLoading:!0,error:null});try{let{data:t,error:s}=await (0,a.A)("POST",n.s.AUTH.verifyToken,{token:r});if(e({isLoading:!1}),s)return{data:null,error:s};return{data:t,error:null}}catch(t){console.error("Token verification error:",t);let r=t.message||"Failed to verify token";return e({isLoading:!1}),{data:null,error:r}}},forgotPassword:async r=>{e({isLoading:!0,error:null});try{let{error:t}=await (0,a.A)("POST",n.s.AUTH.forgotPassword,{email:r});return e({isLoading:!1,error:t||null}),{error:t||null}}catch(t){console.error("Forgot password error:",t);let r=t.message||"Failed to process forgot password request";return e({isLoading:!1,error:r}),{error:r}}},resetPassword:async(r,t)=>{e({isLoading:!0,error:null});try{let{error:s}=await (0,a.A)("POST",n.s.AUTH.resetPassword,{token:r,password:t});return e({isLoading:!1,error:s||null}),{error:s||null}}catch(t){console.error("Reset password error:",t);let r=t.message||"Failed to reset password";return e({isLoading:!1,error:r}),{error:r}}},loadProfile:async()=>{try{e({isLoading:!0});let r=await i();r.success&&r.user?e({user:r.user,isAuthenticated:!0,isLoading:!1,error:null}):e({isAuthenticated:!1,user:null,isLoading:!1,error:r.error||null})}catch(r){console.error("Error loading profile:",r),e({isAuthenticated:!1,user:null,isLoading:!1,error:"Failed to load profile"})}},signOut:async()=>{e({isLoading:!0});try{let{error:r}=await (0,a.A)("POST",n.s.AUTH.signOut);e({user:null,isAuthenticated:!1})}catch(r){console.error("Sign out error:",r),e({user:null,isAuthenticated:!1})}finally{e({isLoading:!1})}},clearError:()=>e({error:null})}))},34735:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let s=t(51060).A.create({baseURL:process.env.NEXT_PUBLIC_API_BASE_URL,headers:{"Content-Type":"application/json"},withCredentials:!0}),a=async(e,r,t,a)=>{try{return{data:(await s({method:e,url:r,data:t,withCredentials:!0,...a})).data,error:null}}catch(e){return{data:null,error:e.response?.data?.error||e.message||"Something went wrong"}}}},42024:(e,r,t)=>{"use strict";t.d(r,{AuthInitializer:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call AuthInitializer() from the server but AuthInitializer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\bhadr\\Downloads\\webstack\\components\\auth-initializer.tsx","AuthInitializer")},46677:(e,r,t)=>{"use strict";t.d(r,{s:()=>s});let s={AUTH:{signUp:"/api/auth/signup",teamMemberCreate:"/api/auth/team-member/create",allTeamMember:"/api/auth/team-member/all",signIn:"/api/auth/signin",signOut:"/api/auth/signout",forgotPassword:"/api/auth/forgot-password",resetPassword:"/api/auth/reset-password",verifyToken:"/api/auth/verify-token",profile:"/api/auth/profile",updatePassword:"/api/auth/update-password",getUser:"/api/auth/profile"},PROJECT:{base:"/api/projects",byId:e=>`/api/projects/${e}`,stats:"/api/projects/stats",byCustomer:e=>`/api/projects/customer/${e}`,files:e=>`/api/projects/${e}/files`,feedback:e=>`/api/projects/${e}/feedback`,messages:e=>`/api/projects/${e}/messages`,teamMembers:e=>`/api/projects/${e}/team-members`,assignTeamMember:e=>`/api/projects/${e}/assign-team-member`},TASK:{base:"/api/tasks",byId:e=>`/api/tasks/${e}`,byProject:e=>`/api/tasks/project/${e}`,byUser:e=>`/api/tasks/user/${e}`,groups:"/api/tasks/groups",statusSummary:"/api/tasks/status/summary",batchAssign:e=>`/api/tasks/user/${e}`},USER:{base:"/api/users",byId:e=>`/api/users/${e}`,team:"/api/users/team",customers:"/api/users/customers"},FILE:{upload:"/api/upload"}}},52358:(e,r,t)=>{"use strict";t.d(r,{Toaster:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\bhadr\\Downloads\\webstack\\components\\ui\\toaster.tsx","Toaster")},56113:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,86346,23)),Promise.resolve().then(t.t.bind(t,27924,23)),Promise.resolve().then(t.t.bind(t,35656,23)),Promise.resolve().then(t.t.bind(t,40099,23)),Promise.resolve().then(t.t.bind(t,38243,23)),Promise.resolve().then(t.t.bind(t,28827,23)),Promise.resolve().then(t.t.bind(t,62763,23)),Promise.resolve().then(t.t.bind(t,97173,23))},58014:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p,metadata:()=>c});var s=t(37413),a=t(1455),o=t.n(a),i=t(74397),n=t.n(i);t(82704);var l=t(83066),d=t(52358),u=t(42024);let c={title:"Webstack - Streamlined Website Development",description:"Webstack provides a fully managed website development service, allowing customers to submit projects and track progress.",generator:"v0.dev"};function p({children:e}){return(0,s.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,s.jsx)("body",{className:`${o().variable} ${n().variable} font-sans`,children:(0,s.jsxs)(l.ThemeProvider,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:[(0,s.jsx)(u.AuthInitializer,{}),e,(0,s.jsx)(d.Toaster,{})]})})})}},60342:(e,r,t)=>{"use strict";t.d(r,{AuthInitializer:()=>a}),t(43210);var s=t(25354);function a(){let{initialize:e}=(0,s.n)();return null}},69794:(e,r,t)=>{"use strict";t.d(r,{Toaster:()=>v});var s=t(60687),a=t(71702),o=t(43210),i=t(47313),n=t(24224),l=t(11860),d=t(96241);let u=i.Kq,c=o.forwardRef(({className:e,...r},t)=>(0,s.jsx)(i.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...r}));c.displayName=i.LM.displayName;let p=(0,n.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m=o.forwardRef(({className:e,variant:r,...t},a)=>(0,s.jsx)(i.bL,{ref:a,className:(0,d.cn)(p({variant:r}),e),...t}));m.displayName=i.bL.displayName,o.forwardRef(({className:e,...r},t)=>(0,s.jsx)(i.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...r})).displayName=i.rc.displayName;let f=o.forwardRef(({className:e,...r},t)=>(0,s.jsx)(i.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...r,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})}));f.displayName=i.bm.displayName;let h=o.forwardRef(({className:e,...r},t)=>(0,s.jsx)(i.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",e),...r}));h.displayName=i.hE.displayName;let g=o.forwardRef(({className:e,...r},t)=>(0,s.jsx)(i.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",e),...r}));function v(){let{toasts:e}=(0,a.dj)();return(0,s.jsxs)(u,{children:[e.map(function({id:e,title:r,description:t,action:a,...o}){return(0,s.jsxs)(m,{...o,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[r&&(0,s.jsx)(h,{children:r}),t&&(0,s.jsx)(g,{children:t})]}),a,(0,s.jsx)(f,{})]},e)}),(0,s.jsx)(c,{})]})}g.displayName=i.VY.displayName},71702:(e,r,t)=>{"use strict";t.d(r,{dj:()=>p,oR:()=>c});var s=t(43210);let a=0,o=new Map,i=e=>{if(o.has(e))return;let r=setTimeout(()=>{o.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,r)},n=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},l=[],d={toasts:[]};function u(e){d=n(d,e),l.forEach(e=>{e(d)})}function c({...e}){let r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...e,id:r,open:!0,onOpenChange:e=>{e||t()}}}),{id:r,dismiss:t,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function p(){let[e,r]=s.useState(d);return s.useEffect(()=>(l.push(r),()=>{let e=l.indexOf(r);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},82704:()=>{},83066:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\bhadr\\Downloads\\webstack\\components\\theme-provider.tsx","ThemeProvider")},90961:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,16444,23)),Promise.resolve().then(t.t.bind(t,16042,23)),Promise.resolve().then(t.t.bind(t,88170,23)),Promise.resolve().then(t.t.bind(t,49477,23)),Promise.resolve().then(t.t.bind(t,29345,23)),Promise.resolve().then(t.t.bind(t,12089,23)),Promise.resolve().then(t.t.bind(t,46577,23)),Promise.resolve().then(t.t.bind(t,31307,23))},92892:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>o});var s=t(60687),a=t(10218);function o({children:e,...r}){return(0,s.jsx)(a.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,...r,children:e})}},94759:(e,r,t)=>{Promise.resolve().then(t.bind(t,42024)),Promise.resolve().then(t.bind(t,83066)),Promise.resolve().then(t.bind(t,52358))},96241:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o,s:()=>i});var s=t(49384),a=t(82348);function o(...e){return(0,a.QP)((0,s.$)(e))}function i(e,r){let t=null;return(...s)=>{null!==t&&clearTimeout(t),t=setTimeout(()=>{t=null,e(...s)},r)}}},97368:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"006ad7933dc62c8151a08efc34b3233d881a9e9069":()=>p,"0078e71f6cc7e95d02d9cdc97ddb6eaa3edb2c55f8":()=>c});var s=t(91199);t(42087);var a=t(74208),o=t(82634);t(5486),t(41635);var i=t(96330);let n=global.prisma||new i.PrismaClient,l=process.env.JWT_SECRET||"your-secret-key";function d(e){try{return(0,o.verify)(e,l)}catch(e){return null}}var u=t(90141);async function c(){try{let e=await (0,a.UL)(),r=e.get("auth_token")?.value,t=(await (0,a.b3)()).get("referer")||"",s="/",o=new URLSearchParams;if(t){let e=new URL(t);s=e.pathname,o=e.searchParams}"/reset-password"===s&&o.get("token")&&(r=o.get("token")??void 0);let i="/"===s?"/":"/login";if(!r)return e.delete("auth_token"),(0,u.redirect)(i),{success:!1,error:"Not authenticated",user:null};let l=d(r);if(!l||!l.userId)return e.delete("auth_token"),(0,u.redirect)(i),{success:!1,error:"Invalid or expired token",user:null};let c=await n.user.findUnique({where:{id:l.userId},select:{id:!0,user_name:!0,email:!0,role:!0,team_role:!0,department:!0,profile_image:!0,created_at:!0,verified:!0}});if(!c)return e.delete("auth_token"),(0,u.redirect)(i),{success:!1,error:"User not found",user:null};return{success:!0,error:null,user:c}}catch(t){let e=await (0,a.UL)(),r=(await (0,a.b3)()).get("x-invoke-path")||"/";return console.error("Server-side profile fetch error:",t),e.delete("auth_token"),(0,u.redirect)("/"===r?"/":"/login"),{success:!1,error:"Failed to fetch profile",user:null}}}async function p(){try{let e=await (0,a.UL)(),r=e.get("auth_token")?.value;if(!r)return{authenticated:!1};let t=d(r);if(!t||!t.userId)return{authenticated:!1};let s=await n.user.findUnique({where:{id:t.userId},select:{id:!0}});return{authenticated:!!s,userId:s?.id||null}}catch(e){return console.error("Auth check error:",e),{authenticated:!1}}}(0,t(33331).D)([c,p]),(0,s.A)(c,"0078e71f6cc7e95d02d9cdc97ddb6eaa3edb2c55f8",null),(0,s.A)(p,"006ad7933dc62c8151a08efc34b3233d881a9e9069",null)}};