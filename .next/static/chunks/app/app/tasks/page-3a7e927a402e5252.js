(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9959],{1482:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},6807:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(23464),r=t(49509);let l=a.A.create({baseURL:r.env.NEXT_PUBLIC_API_BASE_URL,headers:{"Content-Type":"application/json"},withCredentials:!0}),i=async(e,s,t,a)=>{try{return{data:(await l({method:e,url:s,data:t,withCredentials:!0,...a})).data,error:null}}catch(e){var r,i;return{data:null,error:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.error)||e.message||"Something went wrong"}}}},34477:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{callServer:function(){return a.callServer},createServerReference:function(){return l},findSourceMapURL:function(){return r.findSourceMapURL}});let a=t(53806),r=t(31818),l=t(34979).createServerReference},47924:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},53580:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m,oR:()=>u});var a=t(12115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=n(c,e),d.forEach(e=>{e(c)})}function u(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(c);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},53919:(e,s,t)=>{"use strict";t.d(s,{s:()=>a});let a={AUTH:{signUp:"/api/auth/signup",teamMemberCreate:"/api/auth/team-member/create",allTeamMember:"/api/auth/team-member/all",signIn:"/api/auth/signin",signOut:"/api/auth/signout",forgotPassword:"/api/auth/forgot-password",resetPassword:"/api/auth/reset-password",verifyToken:"/api/auth/verify-token",profile:"/api/auth/profile",updatePassword:"/api/auth/update-password",getUser:"/api/auth/profile"},PROJECT:{base:"/api/projects",byId:e=>"/api/projects/".concat(e),stats:"/api/projects/stats",byCustomer:e=>"/api/projects/customer/".concat(e),files:e=>"/api/projects/".concat(e,"/files"),feedback:e=>"/api/projects/".concat(e,"/feedback"),messages:e=>"/api/projects/".concat(e,"/messages"),teamMembers:e=>"/api/projects/".concat(e,"/team-members"),assignTeamMember:e=>"/api/projects/".concat(e,"/assign-team-member")},TASK:{base:"/api/tasks",byId:e=>"/api/tasks/".concat(e),byProject:e=>"/api/tasks/project/".concat(e),byUser:e=>"/api/tasks/user/".concat(e),groups:"/api/tasks/groups",statusSummary:"/api/tasks/status/summary",batchAssign:e=>"/api/tasks/user/".concat(e)},USER:{base:"/api/users",byId:e=>"/api/users/".concat(e),team:"/api/users/team",customers:"/api/users/customers"},FILE:{upload:"/api/upload"}}},53999:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l,s:()=>i});var a=t(52596),r=t(39688);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}function i(e,s){let t=null;return function(){for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];null!==t&&clearTimeout(t),t=setTimeout(()=>{t=null,e(...r)},s)}}},69141:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>V});var a=t(95155),r=t(12115),l=t(35695),i=t(33361),n=t(63949),d=t(30553),c=t(33841),o=t(66997),u=t(84616),m=t(97168);function g(e){let{setIsNewTaskDialogOpen:s}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.P.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl font-semibold tracking-tight",children:"Tasks"}),(0,a.jsx)(o.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-muted-foreground",children:"Manage and track tasks across all your projects"})]}),(0,a.jsx)(o.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,a.jsxs)(m.$,{className:"gap-1.5",onClick:()=>s(!0),children:[(0,a.jsx)(u.A,{className:"h-4 w-4"})," New Task"]})})]})}var p=t(47924),h=t(1482),x=t(89852),b=t(95784);function f(e){let{filters:s,isFilterBarVisible:t,setIsFilterBarVisible:r,updateFilters:l,taskGroups:i}=e;return(0,a.jsxs)("div",{className:"bg-card/60 backdrop-blur-sm rounded-lg border border-border/40 shadow-sm p-4 mb-6",children:[(0,a.jsx)("div",{className:"flex flex-col space-y-4 md:space-y-0 md:flex-row md:items-center md:justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,a.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)(x.p,{type:"search",placeholder:"Search tasks...",className:"pl-9 pr-4 py-2 h-9 bg-background/80 border-border/50 focus-visible:ring-primary/20 focus-visible:ring-offset-0",value:s.searchQuery,onChange:e=>l("q",e.target.value||"")})]}),(0,a.jsx)(m.$,{variant:"outline",size:"sm",className:"h-9 w-9 p-0 rounded-full",onClick:()=>r(!t),"aria-label":t?"Hide filters":"Show filters",title:t?"Hide filters":"Show filters",children:(0,a.jsx)(h.A,{className:"h-4 w-4 ".concat(t?"text-primary":"")})})]})}),t&&(0,a.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4 flex flex-wrap gap-2 items-center",children:(0,a.jsxs)("div",{className:"flex items-center bg-background/80 rounded-md border border-border/50 divide-x divide-border/50 w-full md:w-auto",children:[(0,a.jsxs)(b.l6,{value:s.projectFilter||"all",onValueChange:e=>l("project",e),children:[(0,a.jsx)(b.bq,{className:"min-w-[140px] h-9 border-0 rounded-none rounded-l-md bg-transparent focus:ring-0 focus:ring-offset-0 text-sm font-medium",children:(0,a.jsx)(b.yv,{placeholder:"Project"})}),(0,a.jsxs)(b.gC,{className:"min-w-[180px]",children:[(0,a.jsx)(b.eb,{value:"all",children:"All Projects"}),(0,a.jsx)(b.eb,{value:"project-1",children:"E-commerce Website"}),(0,a.jsx)(b.eb,{value:"project-2",children:"Mobile App"})]})]}),(0,a.jsxs)(b.l6,{value:s.statusFilter||"all",onValueChange:e=>l("status",e),children:[(0,a.jsx)(b.bq,{className:"min-w-[120px] h-9 border-0 rounded-none bg-transparent focus:ring-0 focus:ring-offset-0 text-sm font-medium",children:(0,a.jsx)(b.yv,{placeholder:"Status"})}),(0,a.jsxs)(b.gC,{className:"min-w-[160px]",children:[(0,a.jsx)(b.eb,{value:"all",children:"All Statuses"}),(0,a.jsx)(b.eb,{value:"Pending",children:"Pending"}),(0,a.jsx)(b.eb,{value:"In Progress",children:"In Progress"}),(0,a.jsx)(b.eb,{value:"QA",children:"QA"}),(0,a.jsx)(b.eb,{value:"Open",children:"Open"}),(0,a.jsx)(b.eb,{value:"Completed",children:"Completed"}),(0,a.jsx)(b.eb,{value:"Blocked",children:"Blocked"})]})]}),(0,a.jsxs)(b.l6,{value:s.groupFilter||"all",onValueChange:e=>l("group",e),children:[(0,a.jsx)(b.bq,{className:"min-w-[120px] h-9 border-0 rounded-none rounded-r-md bg-transparent focus:ring-0 focus:ring-offset-0 text-sm font-medium",children:(0,a.jsx)(b.yv,{placeholder:"Group"})}),(0,a.jsxs)(b.gC,{className:"min-w-[160px]",children:[(0,a.jsx)(b.eb,{value:"all",children:"All Groups"}),i.map(e=>(0,a.jsx)(b.eb,{value:e,children:e},e))]})]})]})})]})}var v=t(19946);let j=(0,v.A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),y=(0,v.A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var k=t(34964);function N(e){let{view:s,updateFilters:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Tabs,{value:s,onValueChange:e=>t("view",e),className:"hidden md:block",children:(0,a.jsxs)(k.TabsList,{className:"h-9 bg-background/80 border border-border/50 p-0.5",children:[(0,a.jsxs)(k.TabsTrigger,{value:"list",className:"flex items-center gap-1.5 px-3 data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[(0,a.jsx)(j,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"List"})]}),(0,a.jsxs)(k.TabsTrigger,{value:"board",className:"flex items-center gap-1.5 px-3 data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[(0,a.jsx)(y,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Board"})]})]})}),(0,a.jsx)(k.Tabs,{value:s,onValueChange:e=>t("view",e),className:"md:hidden",children:(0,a.jsxs)(k.TabsList,{className:"grid w-[100px] grid-cols-2 h-9 bg-background/80 border border-border/50 p-0.5",children:[(0,a.jsx)(k.TabsTrigger,{value:"list",className:"flex items-center justify-center data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:(0,a.jsx)(j,{className:"h-4 w-4"})}),(0,a.jsx)(k.TabsTrigger,{value:"board",className:"flex items-center justify-center data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:(0,a.jsx)(y,{className:"h-4 w-4"})})]})})]})}var w=t(66474),T=t(69074),C=t(14186),S=t(88145),A=t(69663),_=t(67133);let P={Pending:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-slate-500 mr-2"}),"In Progress":(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-500 mr-2"}),QA:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-purple-500 mr-2"}),Open:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-slate-500 mr-2"}),Completed:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"}),Blocked:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"})},D={Backlog:"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-100","To Do":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100","In Progress":"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-100",Review:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100",Done:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100"};function I(e){var s;let{task:t,handleTaskClick:r,handleTaskStatusChange:l,getInitials:i}=e;return(0,a.jsxs)("div",{className:"group relative bg-background rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all cursor-pointer border border-border ".concat("High"===t.priority?"shadow-[inset_0_0_0_1px_rgba(234,88,12,0.2)]":""),onClick:e=>{if(e.target instanceof HTMLElement&&e.target.closest("[data-prevent-click]")){e.stopPropagation();return}r(t)},children:["High"===t.priority&&(0,a.jsx)("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[16px] border-t-amber-500 border-l-[16px] border-l-transparent z-10"}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)(S.E,{className:"".concat(D[t.task_group]||"bg-slate-100 text-slate-800"," px-2 py-0.5 text-[10px] font-medium"),children:t.task_group}),(0,a.jsxs)(_.rI,{children:[(0,a.jsx)(_.ty,{asChild:!0,"data-prevent-click":!0,children:(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium cursor-pointer border ".concat("Completed"===t.status?"border-green-200 bg-green-50 text-green-700 dark:border-green-800 dark:bg-green-950 dark:text-green-300":"In Progress"===t.status?"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-800 dark:bg-blue-950 dark:text-blue-300":"Blocked"===t.status?"border-red-200 bg-red-50 text-red-700 dark:border-red-800 dark:bg-red-950 dark:text-red-300":"border-slate-200 bg-slate-50 text-slate-700 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-300"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[P[t.status]||(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-slate-500 mr-2"}),(0,a.jsx)("span",{children:t.status})]}),(0,a.jsx)(w.A,{className:"h-3 w-3 opacity-70"})]})}),(0,a.jsxs)(_.SQ,{align:"end","data-prevent-click":!0,children:[(0,a.jsxs)(_._2,{className:"Pending"===t.status?"bg-accent":"",onClick:()=>l(t.id,"Pending"),children:[(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-slate-500 mr-2"}),"Pending"]}),(0,a.jsxs)(_._2,{className:"In Progress"===t.status?"bg-accent":"",onClick:()=>l(t.id,"In Progress"),children:[(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-500 mr-2"}),"In Progress"]}),(0,a.jsxs)(_._2,{className:"QA"===t.status?"bg-accent":"",onClick:()=>l(t.id,"QA"),children:[(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-purple-500 mr-2"}),"QA"]}),(0,a.jsxs)(_._2,{className:"Open"===t.status?"bg-accent":"",onClick:()=>l(t.id,"Open"),children:[(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-slate-500 mr-2"}),"Open"]}),(0,a.jsxs)(_._2,{className:"Completed"===t.status?"bg-accent":"",onClick:()=>l(t.id,"Completed"),children:[(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"}),"Completed"]}),(0,a.jsxs)(_._2,{className:"Blocked"===t.status?"bg-accent":"",onClick:()=>l(t.id,"Blocked"),children:[(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"}),"Blocked"]})]})]})]}),(0,a.jsx)("div",{className:"mb-2"}),(0,a.jsx)("h3",{className:"font-semibold text-base mb-4 line-clamp-1",children:t.title}),t.due_date&&(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[(0,a.jsx)(T.A,{className:"h-3.5 w-3.5 mr-1.5"}),new Date(t.due_date).toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(null===(s=t.project)||void 0===s?void 0:s.title)||"Unknown Project"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t.assignee&&(0,a.jsx)("div",{className:"flex items-center gap-1.5",children:(0,a.jsxs)(A.eu,{className:"h-6 w-6",children:[(0,a.jsx)(A.BK,{src:t.assignee.profile_image||void 0,alt:t.assignee.user_name}),(0,a.jsx)(A.q5,{className:"text-xs bg-primary/10 text-primary",children:i(t.assignee.user_name)})]})}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,a.jsx)(C.A,{className:"h-3 w-3 mr-1"}),new Date(t.updated_at||t.created_at).toLocaleDateString(void 0,{month:"short",day:"numeric"})]})]})]})]})]})}let E={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},O={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function M(e){let{tasks:s,handleTaskClick:t,handleTaskStatusChange:r,getInitials:l,setIsNewTaskDialogOpen:i}=e;return(0,a.jsx)(o.P.div,{variants:O,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.length>0?s.map(e=>(0,a.jsx)(o.P.div,{variants:E,children:(0,a.jsx)(I,{task:e,handleTaskClick:t,handleTaskStatusChange:r,getInitials:l})},e.id)):(0,a.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"col-span-full",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 bg-card rounded-lg border border-dashed",children:[(0,a.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No tasks found"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center max-w-md",children:"Try adjusting your filters or search query"}),(0,a.jsxs)(m.$,{className:"mt-6",onClick:()=>i(!0),children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Create Task"]})]})})})}let F=(0,v.A)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var L=t(88482);let B={Pending:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-slate-500 mr-2"}),"In Progress":(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-500 mr-2"}),QA:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-purple-500 mr-2"}),Open:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-slate-500 mr-2"}),Completed:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"}),Blocked:(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"})};function R(e){var s;let{task:t,handleTaskClick:r,getInitials:l,draggedTask:i,handleDragStart:n,handleDragEnd:d,group:c}=e;return(0,a.jsxs)(L.Zp,{className:"hover:shadow-md transition-all ".concat(i===t.id?"opacity-40":""," cursor-pointer relative ").concat("High"===t.priority?"shadow-[inset_0_0_0_1px_rgba(234,88,12,0.2)]":""),onClick:()=>r(t),draggable:!0,onDragStart:e=>n(e,t,c),onDragEnd:d,children:["High"===t.priority&&(0,a.jsx)("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[16px] border-t-amber-500 border-l-[16px] border-l-transparent z-10"}),(0,a.jsx)(L.aR,{className:"p-3 pb-2",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)("div",{className:"mr-2",children:B[t.status]||(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-slate-500"})}),(0,a.jsx)(L.ZB,{className:"text-sm font-medium line-clamp-1",children:t.title})]}),(0,a.jsx)(L.BT,{className:"text-xs line-clamp-2",children:t.description})]}),(0,a.jsx)("div",{className:"ml-2 flex items-center",children:(0,a.jsx)(F,{className:"h-4 w-4 text-muted-foreground cursor-move"})})]})}),(0,a.jsx)(L.Wu,{className:"p-3 pt-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(null===(s=t.project)||void 0===s?void 0:s.title)||"Unknown Project"}),t.assignee&&(0,a.jsxs)(A.eu,{className:"h-6 w-6",children:[(0,a.jsx)(A.BK,{src:t.assignee.profile_image||void 0,alt:t.assignee.user_name}),(0,a.jsx)(A.q5,{className:"text-xs",children:l(t.assignee.user_name)})]})]})})]})}let U={Backlog:"border-slate-300 dark:border-slate-600","To Do":"border-blue-300 dark:border-blue-700","In Progress":"border-amber-300 dark:border-amber-700",Review:"border-purple-300 dark:border-purple-700",Done:"border-green-300 dark:border-green-700"};function H(e){let{taskGroups:s,groupedTasks:t,handleTaskClick:r,getInitials:l,draggedTask:i,handleDragStart:n,handleDragEnd:d,handleDragOver:c,handleDragLeave:g,handleDrop:p,setIsNewTaskFormOpen:h}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6",children:s.map(e=>{var s,x;return(0,a.jsxs)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 ".concat(U[e]||U.Backlog),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("h3",{className:"font-medium text-sm",children:e}),(0,a.jsx)(S.E,{variant:"outline",className:"ml-2 text-xs",children:(null===(s=t[e])||void 0===s?void 0:s.length)||0})]}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{h(!0)},children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"bg-card/50 dark:bg-card/20 rounded-lg flex-1 min-h-[500px] overflow-y-auto p-2 transition-colors duration-200 ".concat(i?"border-2 border-dashed border-primary/40":""),onDragOver:c,onDragLeave:g,onDrop:s=>p(s,e),children:[null===(x=t[e])||void 0===x?void 0:x.map((s,t)=>(0,a.jsx)(o.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},className:"mb-3",children:(0,a.jsx)(R,{task:s,handleTaskClick:r,getInitials:l,draggedTask:i,handleDragStart:n,handleDragEnd:d,group:e})},s.id)),(!t[e]||0===t[e].length)&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-24 text-center p-4 text-sm text-muted-foreground border border-dashed rounded-md mt-2",children:[(0,a.jsx)("p",{children:"No tasks"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Drag tasks here"})]})]})]},e)})})}function V(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)();(0,r.useRef)(null),(0,r.useRef)(null);let{tasks:t,isLoading:o,error:u,fetchTasks:m,taskGroups:p}=(0,i.d)(),{isProcessing:h,handleCreateTask:x,handleUpdateTask:b,handleDeleteTask:v,handleUpdateTaskGroup:j}=(0,n.L)(),{filters:y,metadata:k,actions:w}=function(){let{projectFilter:e,statusFilter:s,groupFilter:t,assigneeFilter:a,searchQuery:l,viewMode:n,taskGroups:d,statusSummary:c,setProjectFilter:o,setStatusFilter:u,setGroupFilter:m,setAssigneeFilter:g,setSearchQuery:p,setViewMode:h,fetchTaskGroups:x,fetchStatusSummary:b}=(0,i.d)();return(0,r.useEffect)(()=>{e?x(e):x()},[e,x]),(0,r.useEffect)(()=>{b(e,a)},[e,a,b]),{filters:{projectFilter:e,statusFilter:s,groupFilter:t,assigneeFilter:a,searchQuery:l,viewMode:n},metadata:{taskGroups:d,statusSummary:c},actions:{handleProjectFilterChange:e=>{o(e),t&&m("")},handleStatusFilterChange:e=>{u(e)},handleGroupFilterChange:e=>{m(e)},handleAssigneeFilterChange:e=>{g(e)},handleSearchChange:e=>{p(e)},handleViewModeChange:e=>{h(e)},clearFilters:()=>{o(""),u(""),m(""),g(""),p("")}}}}(),[T,C]=(0,r.useState)(s.get("view")||"list"),[S,A]=(0,r.useState)(null),[_,P]=(0,r.useState)(null),[D,I]=(0,r.useState)(!1),[E,O]=(0,r.useState)(!1),[F,L]=(0,r.useState)(!1),[B,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C(s.get("view")||"list"),m()},[m,s]),(0,r.useEffect)(()=>{let e=s.get("project")||"",t=s.get("status")||"",a=s.get("group")||"",r=s.get("q")||"";e!==y.projectFilter&&w.handleProjectFilterChange(e),t!==y.statusFilter&&w.handleStatusFilterChange(t),a!==y.groupFilter&&w.handleGroupFilterChange(a),r!==y.searchQuery&&w.handleSearchChange(r)},[s,y.projectFilter,y.statusFilter,y.groupFilter,y.searchQuery,w]);let U=(0,r.useCallback)((t,a)=>{let r=new URLSearchParams(s.toString());"all"===a||""===a?r.delete(t):r.set(t,a),"view"===t?C(a):"project"===t?w.handleProjectFilterChange("all"===a?"":a):"status"===t?w.handleStatusFilterChange("all"===a?"":a):"group"===t?w.handleGroupFilterChange("all"===a?"":a):"q"===t&&w.handleSearchChange(a),e.push("/app/tasks?".concat(r.toString()),{scroll:!1})},[s,e,w]),V=(0,r.useMemo)(()=>t.reduce((e,s)=>{let t=s.task_group||"Backlog";return e[t]||(e[t]=[]),e[t].push(s),e},{}),[t]),q=(0,r.useMemo)(()=>p.length>0?p:["Backlog","To Do","In Progress","Review","Done"],[p]),z=(0,r.useCallback)(e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase():"U",[]),G=(0,r.useCallback)((e,s,t)=>{e.dataTransfer.setData("taskId",s.id),e.dataTransfer.setData("sourceGroup",t),A(s.id),setTimeout(()=>{e.target instanceof HTMLElement&&(e.target.style.opacity="0.4")},0)},[]),Q=(0,r.useCallback)(e=>{e.target instanceof HTMLElement&&(e.target.style.opacity="1"),A(null)},[]),$=(0,r.useCallback)(e=>{e.preventDefault(),e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.add("bg-accent/50")},[]),K=(0,r.useCallback)(e=>{e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.remove("bg-accent/50")},[]),X=(0,r.useCallback)(async(e,s)=>{e.preventDefault(),e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.remove("bg-accent/50");let t=e.dataTransfer.getData("taskId");e.dataTransfer.getData("sourceGroup")!==s&&await j(t,s)},[j]),W=(0,r.useCallback)(e=>{P(e),I(!0)},[]),Z=(0,r.useCallback)(async(e,s)=>{t.find(s=>s.id===e)&&_&&_.id===e&&P({..._,status:s}),await b(e,{status:s})},[b,t,_]),J=(0,r.useCallback)((e,s)=>t.filter(t=>t.project_id===s&&t.id!==e),[t]);return(0,a.jsx)(a.Fragment,{children:o&&0===t.length?(0,a.jsxs)("div",{className:"space-y-8 animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-muted rounded-md w-2/3"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded-md w-1/2"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[(0,a.jsx)("div",{className:"h-10 bg-muted rounded-md w-64"}),(0,a.jsx)("div",{className:"h-10 bg-muted rounded-md w-32"}),(0,a.jsx)("div",{className:"h-10 bg-muted rounded-md w-32"})]}),(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,s)=>(0,a.jsx)("div",{className:"h-24 bg-muted rounded-lg"},s))})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(g,{setIsNewTaskDialogOpen:O}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4 md:space-y-0 md:flex-row md:items-center md:justify-between",children:[(0,a.jsx)(f,{filters:y,isFilterBarVisible:B,setIsFilterBarVisible:R,updateFilters:U,taskGroups:q}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(N,{view:T,updateFilters:U})})]}),"list"===T?(0,a.jsx)(M,{tasks:t,handleTaskClick:W,handleTaskStatusChange:Z,getInitials:z,setIsNewTaskDialogOpen:O}):(0,a.jsx)(H,{taskGroups:q,groupedTasks:V,handleTaskClick:W,getInitials:z,draggedTask:S,handleDragStart:G,handleDragEnd:Q,handleDragOver:$,handleDragLeave:K,handleDrop:X,setIsNewTaskFormOpen:L}),_&&(0,a.jsx)(d.u,{task:_,isOpen:D,onClose:()=>I(!1),onStatusChange:Z,relatedTasks:J(_.id,_.project_id),handleUpdateTask:b}),(0,a.jsx)(c.A,{isOpen:E,onClose:()=>O(!1),onSubmit:x}),(0,a.jsx)(c.A,{isOpen:F,onClose:()=>L(!1),onSubmit:x})]})})}},76070:(e,s,t)=>{Promise.resolve().then(t.bind(t,69141))},81497:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},88145:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(95155),r=t(74466),l=t(53999);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(i({variant:t}),s),...r})}},89852:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(95155),r=t(12115),l=t(53999);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});i.displayName="Input"},97168:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>d});var a=t(95155),r=t(12115),l=t(99708),i=t(74466),n=t(53999);let d=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:i,size:c,asChild:o=!1,iconOnly:u=!1,children:m,...g}=e,p=o?l.DX:"button";return(0,a.jsx)(p,{className:(0,n.cn)(d({variant:i,size:c,className:t}),u&&"p-0 w-10 h-10 rounded-full flex items-center justify-center"),ref:s,...g,children:u?r.Children.toArray(m).filter(e=>"string"!=typeof e&&"number"!=typeof e&&null!=e):m})});c.displayName="Button"}},e=>{var s=s=>e(e.s=s);e.O(0,[2848,5687,8138,8074,9550,7275,7209,6997,7938,3860,292,1625,9626,9940,8441,1684,7358],()=>s(76070)),_N_E=e.O()}]);