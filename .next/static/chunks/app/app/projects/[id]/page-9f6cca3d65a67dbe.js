(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9661],{381:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1619:(e,s,t)=>{"use strict";t.d(s,{AF:()=>u,Gu:()=>p,Nx:()=>x,Yf:()=>m,_z:()=>h}),t(14298);var a=t(53580),r=t(6807),i=t(53919),l=t(49509);let n=new Map,d=new Map,c=new Map,o=e=>!e.type||"connection"!==e.type,m=(e,s)=>{if(d.has(e))return;let t=l.env.NEXT_PUBLIC_API_BASE_URL||window.location.origin,r="".concat(t,"/api/messages/sse?projectId=").concat(e,"&userId=").concat(s);try{let t=new EventSource(r);t.onopen=()=>{console.log("SSE connection opened for project: ".concat(e))},t.onmessage=s=>{try{let t=JSON.parse(s.data);if(!o(t)){console.log("System message received:",t);return}let a=function(e){for(let[s,t]of c.entries())try{let a=JSON.parse(t);if(a.sender_id===e.sender_id&&a.message===e.message&&1e4>Math.abs(new Date(a.created_at).getTime()-new Date(e.created_at).getTime()))return s}catch(e){console.error("Error parsing temp message data:",e)}return null}(t),r=!!a;r&&c.delete(a),(n.get(e)||[]).forEach(e=>e(t,r))}catch(e){console.error("Error parsing message:",e)}},t.onerror=r=>{console.error("SSE connection error:",r),(0,a.oR)({title:"Connection Error",description:"Failed to connect to messaging service. Retrying...",variant:"destructive"}),t.close(),d.delete(e),setTimeout(()=>{m(e,s)},5e3)},d.set(e,t)}catch(e){console.error("Failed to create SSE connection:",e)}},x=(e,s)=>{var t;n.has(e)||n.set(e,[]),null===(t=n.get(e))||void 0===t||t.push(s)},u=(e,s)=>{let t=n.get(e)||[],a=t.indexOf(s);-1!==a&&(t.splice(a,1),n.set(e,t))},p=e=>{let s=d.get(e);s&&(s.close(),d.delete(e),n.delete(e),console.log("Closed SSE connection for project: ".concat(e)))},h=async(e,s,t,a)=>{try{let l="temp-".concat(Date.now()),n={id:l,project_id:e,sender_id:t,receiver_id:a,message:s,created_at:new Date().toISOString()};c.set(l,JSON.stringify(n));let{data:d,error:o}=await (0,r.A)("POST",i.s.PROJECT.messages(e),{message:s,receiver_id:a});if(o)throw Error(o);return{success:!0,data:d,tempId:l}}catch(e){return console.error("Error sending message:",e),{success:!1,error:e,tempId:null}}}},11203:(e,s,t)=>{Promise.resolve().then(t.bind(t,49121))},13504:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]])},35169:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},49121:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>J});var a=t(95155),r=t(97168),i=t(12115),l=t(35695),n=t(66997),d=t(34964),c=t(33223),o=t(33361),m=t(81347),x=t(6807),u=t(53919),p=t(53580),h=t(30553),g=t(63949),j=t(33841),v=t(1619),f=t(35169),b=t(13717),N=t(5623),y=t(381),w=t(62525),k=t(67133);function _(e){let{projectId:s,projectTitle:t,handleDeleteProject:i,isDeleting:d}=e,c=(0,l.useRouter)();return(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col sm:flex-row sm:items-center justify-between gap-1 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-2 rounded-xl border border-slate-200/50 dark:border-slate-700/50 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.$,{variant:"ghost",size:"sm",className:"rounded-full bg-white dark:bg-slate-800 shadow-sm hover:bg-slate-100 dark:hover:bg-slate-700",onClick:()=>c.push("/app/projects"),children:(0,a.jsx)(f.A,{className:"h-4 w-4 text-slate-600 dark:text-slate-300"})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("h1",{className:"text-base sm:text-lg md:text-xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600 capitalize",children:t})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(r.$,{variant:"outline",size:"sm",className:"gap-1 border-primary/20 bg-primary/5 hover:bg-primary/10 text-primary shadow-sm",onClick:()=>c.push("/app/projects/".concat(s,"/edit")),children:[(0,a.jsx)(b.A,{className:"h-3.5 w-3.5"}),"Edit"]}),(0,a.jsxs)(k.rI,{children:[(0,a.jsx)(k.ty,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",size:"sm",className:"h-8 w-8 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(k.SQ,{align:"end",className:"w-48",children:[(0,a.jsxs)(k._2,{children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Project Settings"]}),(0,a.jsx)(k.mB,{}),(0,a.jsxs)(k._2,{className:"text-red-600",onClick:i,disabled:d,children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),d?"Deleting...":"Delete Project"]})]})]})]})]})}var T=t(13504),E=t(40646),S=t(14186),A=t(88145),C=t(88482);let P=e=>{if(!e)return"N/A";let s=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)};function M(e){let{project:s,userRole:t}=e;return(0,a.jsx)(n.P.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.6},children:(0,a.jsxs)(C.Zp,{className:"overflow-hidden border-none shadow-lg bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full -mr-16 -mt-16 z-0"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-primary/5 rounded-full -ml-12 -mb-12 z-0"}),(0,a.jsx)(C.aR,{className:"relative z-10 border-b bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm py-2 px-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C.ZB,{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600",children:"Project Overview"}),(0,a.jsxs)(C.BT,{className:"text-sm mt-0.5",children:["Track progress and manage tasks for ",s.title]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(A.E,{variant:"outline",className:"border-primary/20 bg-primary/10 text-primary px-2 py-0.5 text-xs",children:(s.progress_percentage||0)>=100?"Completed":(s.progress_percentage||0)>0?"In Progress":"Planning"})})]})}),(0,a.jsxs)(C.Wu,{className:"space-y-3 p-3 relative z-10",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-medium",children:[(0,a.jsx)("span",{children:"Overall Progress"}),(0,a.jsxs)("span",{className:"text-primary font-bold",children:[s.progress_percentage,"%"]})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"overflow-hidden h-2 text-xs flex rounded-lg bg-primary/10",children:(0,a.jsx)(n.P.div,{initial:{width:0},animate:{width:"".concat(s.progress_percentage,"%")},transition:{duration:1,delay:.5,ease:"easeOut"},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-gradient-to-r from-primary to-purple-600 rounded-lg"})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 pt-1",children:[(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Client"}),(0,a.jsx)("p",{className:"font-medium text-sm",children:s.customer_name})]}),(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Budget"}),(0,a.jsxs)("p",{className:"font-medium text-sm",children:["$",s.budget||2500]})]}),(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Start Date"}),(0,a.jsx)("p",{className:"font-medium text-sm",children:P(s.start_date||"2025-04-06T00:00:00.000Z")})]}),(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Duration"}),(0,a.jsxs)("p",{className:"font-medium text-sm",children:[s.duration_days||112," days"]})]}),(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Priority"}),(0,a.jsx)("p",{className:"font-medium text-sm capitalize",children:s.priority||"Low"})]}),(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Payment Type"}),(0,a.jsx)("p",{className:"font-medium text-sm capitalize",children:s.payment_type||"Fixed"})]})]}),("admin"===t||"team"===t)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 pt-1",children:[(0,a.jsx)(n.P.div,{whileHover:{y:-3,transition:{duration:.2}},className:"group",children:(0,a.jsx)(C.Zp,{className:"border border-slate-200 dark:border-slate-700 shadow-sm transition-all duration-300 group-hover:shadow-md group-hover:border-primary/50",children:(0,a.jsxs)(C.Wu,{className:"p-2 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 shadow-sm shadow-blue-500/20 group-hover:shadow-blue-500/40 transition-all duration-300",children:(0,a.jsx)(T.A,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Tasks"}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:s.total_tasks})]})]})})}),(0,a.jsx)(n.P.div,{whileHover:{y:-3,transition:{duration:.2}},className:"group",children:(0,a.jsx)(C.Zp,{className:"border border-slate-200 dark:border-slate-700 shadow-sm transition-all duration-300 group-hover:shadow-md group-hover:border-primary/50",children:(0,a.jsxs)(C.Wu,{className:"p-2 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-green-500 to-green-600 shadow-sm shadow-green-500/20 group-hover:shadow-green-500/40 transition-all duration-300",children:(0,a.jsx)(E.A,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Completed"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:s.completed_tasks})]})]})})}),(0,a.jsx)(n.P.div,{whileHover:{y:-3,transition:{duration:.2}},className:"group",children:(0,a.jsx)(C.Zp,{className:"border border-slate-200 dark:border-slate-700 shadow-sm transition-all duration-300 group-hover:shadow-md group-hover:border-primary/50",children:(0,a.jsxs)(C.Wu,{className:"p-2 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-amber-500 to-amber-600 shadow-sm shadow-amber-500/20 group-hover:shadow-amber-500/40 transition-all duration-300",children:(0,a.jsx)(S.A,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"In Progress"}),(0,a.jsx)("p",{className:"text-xl font-bold text-amber-600 dark:text-amber-400",children:(s.total_tasks||0)-(s.completed_tasks||0)})]})]})})})]})]})]})})}function z(e){let{project:s}=e;return(0,a.jsxs)(n.P.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.6,delay:.2},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-purple-500/5 rounded-xl -m-1 blur-xl"}),(0,a.jsxs)(C.Zp,{className:"h-full border-none shadow-lg backdrop-blur-sm bg-white/80 dark:bg-slate-900/80 relative z-10",children:[(0,a.jsx)(C.aR,{className:"border-b bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm py-3 px-4",children:(0,a.jsx)(C.ZB,{className:"text-base font-bold flex items-center gap-2",children:(0,a.jsx)("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600",children:"Additional Details"})})}),(0,a.jsx)(C.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"pr-2",children:(0,a.jsx)("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:[{label:"Created",value:P(s.created_at||"2025-04-06T09:55:43.919Z")},{label:"Last Updated",value:P(s.updated_at||"2025-04-06T09:55:44.296Z")},{label:"Pricing Tier",value:s.pricing_tier||"Standard",isCapitalize:!0},{label:"Visibility",value:s.visibility||"Public",isCapitalize:!0},{label:"Required Skills",value:s.required_skills||"React, Next.js, TypeScript, Node.js"},{label:"Deliverables",value:s.deliverables||"Homepage design is urgent"}].map((e,s)=>(0,a.jsxs)("div",{className:"py-2 px-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-0.5",children:e.label}),(0,a.jsx)("p",{className:"font-medium text-sm ".concat(e.isCapitalize?"capitalize":""),children:e.value})]},s))})})})]})]})}var D=t(84616),F=t(58680);let O={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function R(e){let{projectTasks:s,isLoadingTasks:t,handleTaskClick:i,setIsNewTaskFormOpen:l}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Project Tasks"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Manage and track tasks for this project"})]}),(0,a.jsxs)(r.$,{size:"sm",className:"gap-1 bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",onClick:()=>l(!0),children:[(0,a.jsx)(D.A,{className:"h-3.5 w-3.5"}),"Add Task"]})]}),t?(0,a.jsx)("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map((e,s)=>(0,a.jsx)("div",{className:"h-24 bg-muted rounded-lg"},s))}):(0,a.jsx)(n.P.div,{variants:O,initial:"hidden",animate:"visible",className:"space-y-4",children:s.length>0?(0,a.jsx)(F.R,{tasks:s,onTaskClick:i}):(0,a.jsx)(C.Zp,{className:"border border-dashed bg-background/50",children:(0,a.jsxs)(C.Wu,{className:"flex flex-col items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"rounded-full bg-primary/10 p-3 mb-3",children:(0,a.jsx)(E.A,{className:"h-6 w-6 text-primary"})}),(0,a.jsx)("h3",{className:"text-base font-medium mb-1",children:"No tasks found"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center text-sm max-w-md mb-4",children:"This project doesn't have any tasks yet. Create your first task to get started."}),(0,a.jsxs)(r.$,{size:"sm",className:"gap-1 bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",onClick:()=>l(!0),children:[(0,a.jsx)(D.A,{className:"h-3.5 w-3.5"}),"Create First Task"]})]})})})]})}var U=t(69663),Z=t(99840);function I(e){let{projectTeamMembers:s,allTeamMembers:t,isAssigningMember:l,assignTeamMember:d,removeTeamMember:c}=e,[o,m]=(0,i.useState)(!1),x=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase():"U";return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Team Members"}),(0,a.jsxs)(Z.lG,{open:o,onOpenChange:m,children:[(0,a.jsx)(Z.zM,{asChild:!0,children:(0,a.jsxs)(r.$,{size:"sm",className:"gap-1",children:[(0,a.jsx)(D.A,{className:"h-3.5 w-3.5"}),"Add Member"]})}),(0,a.jsxs)(Z.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(Z.c7,{children:[(0,a.jsx)(Z.L3,{children:"Assign Team Member"}),(0,a.jsx)(Z.rr,{children:"Select team members to assign to this project. They will have access to project resources."})]}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:t.length>0?(0,a.jsx)("div",{className:"space-y-2",children:t.map(e=>{let t=s.some(s=>s.id===e.id);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(U.eu,{className:"h-8 w-8",children:[(0,a.jsx)(U.BK,{src:e.profile_image||void 0,alt:e.user_name}),(0,a.jsx)(U.q5,{className:"bg-gradient-to-br from-primary to-purple-600 text-white text-xs",children:x(e.user_name)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.user_name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.team_role||"Team Member"})]})]}),t?(0,a.jsx)(A.E,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",children:"Assigned"}):(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>d(e.id),disabled:l,children:l?"Assigning...":"Assign"})]},e.id)})}):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No team members available"})})})}),(0,a.jsx)(Z.Es,{children:(0,a.jsx)(r.$,{variant:"outline",onClick:()=>m(!1),children:"Close"})})]})]})]}),(0,a.jsx)(C.Zp,{children:(0,a.jsx)(C.Wu,{className:"p-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:s.length>0?s.map((e,s)=>(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:(0,a.jsx)(C.Zp,{children:(0,a.jsxs)(C.Wu,{className:"p-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(U.eu,{className:"h-10 w-10",children:[(0,a.jsx)(U.BK,{src:e.profile_image||void 0,alt:e.user_name}),(0,a.jsx)(U.q5,{className:"bg-gradient-to-br from-primary to-purple-600 text-white text-xs",children:x(e.user_name)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.user_name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.role||"Team Member"})]})]}),(0,a.jsx)(r.$,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900",onClick:s=>{s.stopPropagation(),c(e.id)},title:"Remove from project",children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]})})},e.id)):(0,a.jsx)("div",{className:"col-span-full text-center py-6",children:(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"No team members assigned to this project yet."})})})})})]})}var B=t(81497);function H(e){let{messages:s,newMessage:t,setNewMessage:l,sendMessage:d,user:c,project:o}=e,m=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase():"U";return(0,i.useEffect)(()=>{let e=document.getElementById("messages-container");e&&(e.scrollTop=e.scrollHeight)},[s]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Project Messages"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Communicate with team members and clients"})]})}),(0,a.jsx)(C.Zp,{className:"border shadow-sm overflow-hidden",children:(0,a.jsxs)(C.Wu,{className:"p-0",children:[(0,a.jsx)("div",{className:"h-[450px] overflow-y-auto p-0 bg-slate-50/50 dark:bg-slate-900/50",id:"messages-container",children:(0,a.jsx)("div",{className:"px-4 py-3",children:s.length>0?(e=>{let s={};return e.forEach(e=>{let t=new Date(e.created_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});s[t]||(s[t]=[]),s[t].push(e)}),Object.entries(s).map(e=>{let[s,t]=e;return{date:s,messages:t}})})(s).map((e,s)=>(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-center my-4",children:(0,a.jsx)("div",{className:"bg-slate-200/70 dark:bg-slate-800/70 px-3 py-1 rounded-full text-xs font-medium text-slate-700 dark:text-slate-300",children:e.date})}),e.messages.map((t,r)=>{var i,l,d,o,x,u,p,h,g,j,v;let f=(null===(i=t.sender)||void 0===i?void 0:i.id)===(null==c?void 0:c.id),b=t.isTemp,N=0===r||(null===(d=e.messages[r-1])||void 0===d?void 0:null===(l=d.sender)||void 0===l?void 0:l.id)!==(null===(o=t.sender)||void 0===o?void 0:o.id);return(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.05*r},className:"flex gap-2 ".concat(f?"justify-end":"justify-start"," ").concat(N||f?"":"pl-10"," ").concat(!N&&f?"pr-10":""," mb-3"),children:[!f&&N&&(0,a.jsxs)(U.eu,{className:"h-8 w-8 mt-1 flex-shrink-0",children:[(0,a.jsx)(U.BK,{src:(null===(x=t.sender)||void 0===x?void 0:x.profile_image)||void 0,alt:(null===(u=t.sender)||void 0===u?void 0:u.user_name)||"User"}),(0,a.jsx)(U.q5,{className:"text-xs ".concat((null===(p=t.sender)||void 0===p?void 0:p.role)==="admin"||(null===(h=t.sender)||void 0===h?void 0:h.role)==="team_member"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300"),children:m((null===(g=t.sender)||void 0===g?void 0:g.user_name)||"User")})]}),f&&N&&(0,a.jsxs)(U.eu,{className:"h-8 w-8 mt-1 flex-shrink-0 order-2 ml-2",children:[(0,a.jsx)(U.BK,{src:(null==c?void 0:c.profile_image)||void 0,alt:(null==c?void 0:c.name)||"You"}),(0,a.jsx)(U.q5,{className:"bg-primary text-white text-xs",children:m((null==c?void 0:c.name)||"You")})]}),(0,a.jsxs)("div",{className:"flex flex-col ".concat(f?"items-end":"items-start"," max-w-[80%]"),children:[N&&!f&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium",children:(null===(j=t.sender)||void 0===j?void 0:j.user_name)||"User"}),(null===(v=t.sender)||void 0===v?void 0:v.role)&&(0,a.jsx)(A.E,{variant:"outline",className:"text-[10px] px-1.5 py-0 border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:"admin"===t.sender.role?"Admin":"team_member"===t.sender.role?"Team":"Client"})]}),(0,a.jsxs)("div",{className:"rounded-lg px-3 py-2 ".concat(f?"bg-primary text-white dark:bg-primary dark:text-white ".concat(b?"opacity-70":""):"bg-white dark:bg-slate-800 shadow-sm border border-slate-100 dark:border-slate-700"),children:[(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:t.message}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1 mt-1",children:[(0,a.jsx)("p",{className:"text-[10px] ".concat(f?"text-white/70":"text-muted-foreground"),children:new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),b&&(0,a.jsx)("span",{className:"text-[10px] italic text-white/70",children:f?"sending...":""}),t.sendFailed&&(0,a.jsx)("span",{className:"text-[10px] text-red-300 italic",children:"failed to send"})]})]})]})]},t.id||"".concat(s,"-").concat(r))})]},e.date)):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[300px] text-center",children:[(0,a.jsx)("div",{className:"rounded-full bg-primary/5 p-3 mb-3",children:(0,a.jsx)(B.A,{className:"h-6 w-6 text-primary/70"})}),(0,a.jsx)("h3",{className:"text-base font-medium mb-1",children:"No messages yet"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm max-w-md mb-4",children:"Start the conversation with your team or client to discuss project details."})]})})}),(0,a.jsx)("div",{className:"border-t bg-white dark:bg-slate-900 p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.eu,{className:"h-8 w-8 flex-shrink-0",children:(0,a.jsx)(U.q5,{className:"bg-primary/10 text-primary text-xs",children:m((null==c?void 0:c.name)||"You")})}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 pr-10 rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:outline-none focus:ring-1 focus:ring-primary/30 text-sm",placeholder:"Type your message here...",value:t,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),t.trim()&&d())}}),(0,a.jsx)(r.$,{type:"button",size:"icon",onClick:d,disabled:!t.trim(),className:"h-7 w-7 absolute right-1.5 top-1/2 -translate-y-1/2 rounded-full bg-primary hover:bg-primary/90 text-white",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"rotate-45",children:(0,a.jsx)("path",{d:"m5 12 14-9-9 14v-5H5Z"})})})]})]})})]})})]})}var L=t(57434);function $(e){let{files:s}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Project Files"}),(0,a.jsxs)(r.$,{size:"sm",className:"gap-1",children:[(0,a.jsx)(D.A,{className:"h-3.5 w-3.5"}),"Upload File"]})]}),(0,a.jsx)(C.Zp,{children:(0,a.jsx)(C.Wu,{className:"p-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:s.length>0?s.map((e,s)=>(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:(0,a.jsx)(C.Zp,{className:"hover:shadow-md transition-all",children:(0,a.jsx)(C.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-1.5 rounded-md bg-primary/10",children:(0,a.jsx)(L.A,{className:"h-4 w-4 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-sm truncate",children:e.file_name}),(0,a.jsxs)("div",{className:"flex items-center text-[10px] text-muted-foreground mt-0.5",children:[(0,a.jsx)("span",{children:e.file_type}),(0,a.jsx)("span",{className:"mx-1.5",children:"•"}),(0,a.jsx)("span",{children:e.file_size}),(0,a.jsx)("span",{className:"mx-1.5",children:"•"}),(0,a.jsx)("span",{children:P(e.uploaded_at)})]})]})]})})})},e.id||s)):(0,a.jsx)("div",{className:"col-span-full text-center py-6",children:(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"No files uploaded yet."})})})})})]})}var q=t(71007);let W={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function J(){let e,s;let{user:t}=(0,m.n)(),{toast:f}=(0,p.dj)(),b=(0,l.useParams)(),N=(0,l.useRouter)(),y=b.id,{getProjectById:w,updateProject:k,deleteProject:T}=(0,c.b)(),{fetchTasks:E,fetchTaskGroups:S,fetchStatusSummary:A}=(0,o.d)(),{handleCreateTask:C,handleUpdateTask:P}=(0,g.L)(),[D,F]=(0,i.useState)(null),[O,U]=(0,i.useState)([]),[Z,J]=(0,i.useState)(!0),[K,G]=(0,i.useState)(!1),[V,Y]=(0,i.useState)(!1),[Q,X]=(0,i.useState)(!1),[ee,es]=(0,i.useState)(!1),[et,ea]=(0,i.useState)(null),[er,ei]=(0,i.useState)(!1),[el,en]=(0,i.useState)(!1),ed=(null==t?void 0:t.role)||"user",[ec,eo]=(0,i.useState)([]),[em,ex]=(0,i.useState)([]),[eu,ep]=(0,i.useState)([]),[eh,eg]=(0,i.useState)([]),[ej,ev]=(0,i.useState)([]),[ef,eb]=(0,i.useState)(""),[eN,ey]=(0,i.useState)(!1),[ew,ek]=(0,i.useState)({name:"",role:"",email:""}),[e_,eT]=(0,i.useState)(!1),[eE,eS]=(0,i.useState)(!1);(0,i.useRef)(null),(0,i.useEffect)(()=>{if(y&&(null==t?void 0:t.id)){console.log("Initializing SSE connection for project ".concat(y," and user ").concat(t.id)),(0,v.Yf)(y,t.id);let e=(e,s)=>{console.log("New message received:",e,s?"(replacement)":""),e&&"connection"!==e.type&&e.message&&(eg(t=>s?t.map(s=>s.id.toString().startsWith("temp-")&&s.sender_id===e.sender_id&&s.message===e.message?{...e,isTemp:!1}:s):t.some(s=>s.id===e.id)?t:[...t,e]),setTimeout(()=>{let e=document.getElementById("messages-container");e&&(e.scrollTop=e.scrollHeight)},100))};return(0,v.Nx)(y,e),()=>{console.log("Cleaning up SSE connection for project ".concat(y)),(0,v.AF)(y,e),(0,v.Gu)(y)}}},[y,null==t?void 0:t.id]);let eA=async()=>{J(!0);try{let{data:e,error:s}=await w(y);if(s){f({title:"Error",description:s,variant:"destructive"});return}e&&F(e)}catch(e){console.error("Error fetching project:",e),f({title:"Error",description:"Failed to load project details",variant:"destructive"})}finally{J(!1)}},eC=()=>{G(!0);try{D&&D.tasks?(console.log("Using tasks from project data:",D.tasks),U(D.tasks)):U([])}catch(e){console.error("Error setting project tasks:",e),f({title:"Error",description:"Failed to load project tasks",variant:"destructive"})}finally{G(!1)}},eP=async()=>{Y(!0);try{let{data:e,error:s}=await (0,x.A)("GET",u.s.PROJECT.teamMembers(y));if(s){console.error("Error fetching project team members:",s);return}(null==e?void 0:e.team_members)&&ep(e.team_members)}catch(e){console.error("Error fetching project team members:",e)}finally{Y(!1)}},eM=async()=>{Y(!0);try{let{data:e,error:s}=await (0,x.A)("GET",u.s.AUTH.allTeamMember);if(s){console.error("Error fetching team members:",s);return}(null==e?void 0:e.team_members)&&ex(e.team_members)}catch(e){console.error("Error fetching team members:",e)}finally{Y(!1)}},ez=async e=>{eS(!0);try{let{data:s,error:t}=await (0,x.A)("POST",u.s.PROJECT.assignTeamMember(y),{user_id:e});if(t)return f({title:"Error",description:t,variant:"destructive"}),!1;return f({title:"Success",description:"Team member assigned to project successfully"}),await eP(),!0}catch(e){return console.error("Error assigning team member:",e),f({title:"Error",description:"Failed to assign team member to project",variant:"destructive"}),!1}finally{eS(!1)}},eD=async e=>{try{let{data:s,error:t}=await (0,x.A)("DELETE","".concat(u.s.PROJECT.assignTeamMember(y),"?user_id=").concat(e));if(t)return f({title:"Error",description:t,variant:"destructive"}),!1;return f({title:"Success",description:"Team member removed from project successfully"}),await eP(),!0}catch(e){return console.error("Error removing team member:",e),f({title:"Error",description:"Failed to remove team member from project",variant:"destructive"}),!1}},eF=async()=>{X(!0);try{let{data:e,error:s}=await (0,x.A)("GET",u.s.PROJECT.messages(y));if(s){console.error("Error fetching project messages:",s);return}(null==e?void 0:e.messages)&&eg(e.messages)}catch(e){console.error("Error fetching project messages:",e)}finally{X(!1)}},eO=async()=>{es(!0);try{let{data:e,error:s}=await (0,x.A)("GET",u.s.PROJECT.files(y));if(s){console.error("Error fetching project files:",s);return}(null==e?void 0:e.files)&&ev(e.files)}catch(e){console.error("Error fetching project files:",e)}finally{es(!1)}},eR=async()=>{if(ef.trim())try{let e={id:"temp-".concat(Date.now()),project_id:y,sender_id:(null==t?void 0:t.id)||"",receiver_id:(null==D?void 0:D.customer_id)||"",message:ef,created_at:new Date().toISOString(),isTemp:!0,sender:{id:(null==t?void 0:t.id)||"",user_name:(null==t?void 0:t.name)||"You",profile_image:null==t?void 0:t.profile_image,role:null==t?void 0:t.role}};eg(s=>[...s,e]),eb(""),(await (0,v._z)(y,ef,(null==t?void 0:t.id)||"",(null==D?void 0:D.customer_id)||"")).success||(f({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"}),eg(s=>s.map(s=>s.id===e.id?{...s,sendFailed:!0}:s)))}catch(e){console.error("Error sending message:",e),f({title:"Error",description:"Failed to send message",variant:"destructive"})}},eU=async()=>{eT(!0);try{let{error:e}=await T(y);if(e){f({title:"Error",description:e,variant:"destructive"});return}f({title:"Success",description:"Project deleted successfully"}),N.push("/app/projects")}catch(e){console.error("Error deleting project:",e),f({title:"Error",description:"Failed to delete project",variant:"destructive"})}finally{eT(!1)}};(0,i.useEffect)(()=>{y&&(eA(),("admin"===ed||"team"===ed)&&(eM(),eP()),eF(),eO())},[y,ed]),(0,i.useEffect)(()=>{D&&eC()},[D]);let eZ=async(e,s)=>{try{O.find(s=>s.id===e)&&(et&&et.id===e&&ea({...et,status:s}),U(t=>t.map(t=>t.id===e?{...t,status:s}:t))),await P(e,{status:s}),await eA(),f({title:"Success",description:"Task status updated to ".concat(s)})}catch(s){if(console.error("Error updating task status:",s),f({title:"Error",description:"Failed to update task status. Please try again.",variant:"destructive"}),et&&et.id===e){let s=O.find(s=>s.id===e);s&&ea(s)}}},eI=async e=>{try{U(s=>s.map(s=>s.id===e.id?e:s)),et&&et.id===e.id&&ea(e),await eA(),f({title:"Success",description:"Task updated successfully"})}catch(e){console.error("Error updating task:",e),f({title:"Error",description:"Failed to update task. Please try again.",variant:"destructive"})}},eB=async e=>{try{if(!e.title||!e.description||!e.status||!e.task_group||!e.project_id)return f({title:"Error",description:"Missing required task fields",variant:"destructive"}),null;let s={title:e.title,description:e.description,status:e.status,task_group:e.task_group,project_id:e.project_id,assigned_to:e.assigned_to||null,due_date:e.due_date||null,priority:e.priority||"Medium"},t=await C(s);if(t)return f({title:"Success",description:"Task created successfully"}),eC(),t;return null}catch(e){return console.error("Error creating task:",e),f({title:"Error",description:"Failed to create task",variant:"destructive"}),null}};return Z?(0,a.jsxs)("div",{className:"space-y-8 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"h-8 bg-muted rounded-md w-1/3"}),(0,a.jsx)("div",{className:"h-10 bg-muted rounded-md w-32"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"h-64 bg-muted rounded-lg md:col-span-2"}),(0,a.jsx)("div",{className:"h-64 bg-muted rounded-lg"})]}),(0,a.jsx)("div",{className:"h-10 bg-muted rounded-md w-64"}),(0,a.jsx)("div",{className:"h-64 bg-muted rounded-lg"})]}):D?(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-3 space-y-3 md:space-y-4",children:[(0,a.jsx)(_,{projectId:y,projectTitle:D.title,handleDeleteProject:eU,isDeleting:e_}),(0,a.jsxs)(n.P.div,{variants:W,initial:"hidden",animate:"visible",className:"grid grid-cols-1 lg:grid-cols-3 gap-2 md:gap-3 lg:gap-4",children:[(0,a.jsx)("div",{className:"col-span-1 lg:col-span-2",children:(0,a.jsx)(M,{project:D,userRole:ed})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(z,{project:D})})]}),(0,a.jsxs)(d.Tabs,{defaultValue:"customer"===ed?"messages":"tasks",className:"w-full",children:[(0,a.jsxs)(d.TabsList,{className:"grid ".concat("customer"===ed?"grid-cols-2":"grid-cols-2 sm:grid-cols-4"," w-full max-w-md h-9"),children:[("admin"===ed||"team"===ed)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.TabsTrigger,{value:"tasks",className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(q.A,{className:"h-3.5 w-3.5"}),"Tasks"]}),(0,a.jsxs)(d.TabsTrigger,{value:"team",className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(q.A,{className:"h-3.5 w-3.5"}),"Team"]})]}),(0,a.jsxs)(d.TabsTrigger,{value:"messages",className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(B.A,{className:"h-3.5 w-3.5"}),"Messages"]}),(0,a.jsxs)(d.TabsTrigger,{value:"files",className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(L.A,{className:"h-3.5 w-3.5"}),"Files"]})]}),("admin"===ed||"team"===ed)&&(0,a.jsx)(d.TabsContent,{value:"tasks",className:"mt-6",children:(0,a.jsx)(R,{projectTasks:O,isLoadingTasks:K,handleTaskClick:e=>{ea(e),ei(!0)},setIsNewTaskFormOpen:en})}),("admin"===ed||"team"===ed)&&(0,a.jsx)(d.TabsContent,{value:"team",className:"mt-6",children:(0,a.jsx)(I,{projectTeamMembers:eu,allTeamMembers:em,isAssigningMember:eE,assignTeamMember:ez,removeTeamMember:eD})}),(0,a.jsx)(d.TabsContent,{value:"messages",className:"mt-6",children:(0,a.jsx)(H,{messages:eh,newMessage:ef,setNewMessage:eb,sendMessage:eR,user:t})}),(0,a.jsx)(d.TabsContent,{value:"files",className:"mt-6",children:(0,a.jsx)($,{files:ej})})]}),(0,a.jsx)(j.A,{isOpen:el,onClose:()=>en(!1),onSubmit:eB,initialProjectId:y}),et&&(0,a.jsx)(h.u,{task:et,isOpen:er,onClose:()=>ei(!1),onStatusChange:eZ,relatedTasks:(e=et.id,s=et.project_id,O.filter(t=>t.project_id===s&&t.id!==e)),handleUpdateTask:P,onTaskUpdate:eI})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[50vh]",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Project Not Found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"The project you're looking for doesn't exist or has been removed."}),(0,a.jsx)(r.$,{onClick:()=>N.push("/app/projects"),children:"Back to Projects"})]})}},57434:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},58680:(e,s,t)=>{"use strict";t.d(s,{R:()=>h});var a=t(95155),r=t(84616),i=t(40646),l=t(14186),n=t(9428),d=t(69074),c=t(5623),o=t(66997),m=t(69663),x=t(88145),u=t(97168);let p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function h(e){let{tasks:s,onTaskClick:t}=e,h=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase():"U",g=e=>{let s=new Date(e),t=Math.abs(new Date().getTime()-s.getTime()),a=Math.floor(t/864e5),r=Math.floor(t/36e5),i=Math.floor(t/6e4);return a>0?1===a?"1 day ago":"".concat(a," days ago"):r>0?1===r?"1 hour ago":"".concat(r," hours ago"):i>0?1===i?"1 minute ago":"".concat(i," minutes ago"):"Just now"};return(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-border/50 shadow-sm overflow-hidden",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-3 p-3 text-xs font-medium text-muted-foreground border-b",children:[(0,a.jsx)("div",{className:"col-span-5",children:"Task"}),(0,a.jsx)("div",{className:"col-span-2 text-center",children:"Assignee"}),(0,a.jsx)("div",{className:"col-span-2 text-center",children:"Due Date"}),(0,a.jsx)("div",{className:"col-span-2 text-center",children:"Priority"}),(0,a.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,a.jsx)(u.$,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full bg-primary/10 text-primary",children:(0,a.jsx)(r.A,{className:"h-3 w-3"})})})]}),(0,a.jsx)("div",{className:"divide-y divide-border/50",children:s.map(e=>(0,a.jsx)(o.P.div,{variants:p,className:"group hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer",onClick:()=>t(e),children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-3 p-3 items-center relative",children:["High"===e.priority&&(0,a.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-amber-500"}),"Medium"===e.priority&&(0,a.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-500"}),(0,a.jsxs)("div",{className:"col-span-5 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:"Completed"===e.status?(0,a.jsx)(i.A,{className:"h-4 w-4 text-green-500"}):"In Progress"===e.status?(0,a.jsx)(l.A,{className:"h-4 w-4 text-blue-500"}):(0,a.jsx)(n.A,{className:"h-4 w-4 text-slate-400"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,a.jsx)("h3",{className:"font-medium text-sm group-hover:text-primary transition-colors truncate",children:e.title}),(0,a.jsx)(x.E,{variant:"outline",className:"text-[10px] px-1 py-0 border-muted-foreground/30 bg-background flex-shrink-0",children:e.task_group||"Backlog"}),(0,a.jsx)("span",{className:"text-[10px] text-muted-foreground whitespace-nowrap flex-shrink-0",children:g(e.created_at)})]})]}),(0,a.jsx)("div",{className:"col-span-2 flex justify-center",children:e.assignee?(0,a.jsxs)(m.eu,{className:"h-7 w-7 border border-muted",children:[(0,a.jsx)(m.BK,{src:e.assignee.profile_image||void 0,alt:e.assignee.user_name}),(0,a.jsx)(m.q5,{className:"bg-primary text-white text-xs",children:h(e.assignee.user_name)})]}):(0,a.jsx)(x.E,{variant:"outline",className:"text-xs bg-slate-100 dark:bg-slate-800",children:"Unassigned"})}),(0,a.jsx)("div",{className:"col-span-2 flex justify-center items-center text-sm",children:e.due_date?(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(d.A,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xs",children:new Date(e.due_date).toLocaleDateString()})]}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"No due date"})}),(0,a.jsx)("div",{className:"col-span-2 flex justify-center",children:(0,a.jsx)(x.E,{className:"".concat("High"===e.priority?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-100":"Medium"===e.priority?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-100"," px-2.5 py-0.5 text-xs font-medium"),children:e.priority||"Low"})}),(0,a.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,a.jsx)(u.$,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full",children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})})]})},e.id))})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2848,5687,8138,8074,9550,7275,7209,6997,7938,3860,292,3678,4084,1625,9626,9940,8441,1684,7358],()=>s(11203)),_N_E=e.O()}]);