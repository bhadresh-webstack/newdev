"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9940],{33841:(e,t,a)=>{a.d(t,{A:()=>E});var s=a(95155),r=a(12115),l=a(9428),i=a(14186),n=a(40646),d=a(69074),o=a(63008),c=a(97168),u=a(89852),m=a(82714),x=a(99474),p=a(95784),h=a(99840),g=a(36894),f=a(60823),j=a(69663),b=a(88145),v=a(53999),N=a(53580),y=a(6807),k=a(53919);let w=[{value:"Pending",label:"Pending",icon:(0,s.jsx)(l.A,{className:"h-4 w-4 text-slate-500"})},{value:"In Progress",label:"In Progress",icon:(0,s.jsx)(i.A,{className:"h-4 w-4 text-blue-500"})},{value:"Completed",label:"Completed",icon:(0,s.jsx)(n.A,{className:"h-4 w-4 text-green-500"})},{value:"Blocked",label:"Blocked",icon:(0,s.jsx)(l.A,{className:"h-4 w-4 text-red-500"})}],C=[{value:"Low",label:"Low",color:"bg-emerald-50 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800"},{value:"Medium",label:"Medium",color:"bg-amber-50 text-amber-700 dark:bg-amber-950 dark:text-amber-300 border-amber-200 dark:border-amber-800"},{value:"High",label:"High",color:"bg-rose-50 text-rose-700 dark:bg-rose-950 dark:text-rose-300 border-rose-200 dark:border-rose-800"}],_=[{value:"Backlog",label:"Backlog"},{value:"To Do",label:"To Do"},{value:"In Progress",label:"In Progress"},{value:"Review",label:"Review"},{value:"Done",label:"Done"}],E=(0,r.memo)(function(e){var t,a,l;let{isOpen:i,onClose:n,onSubmit:E,initialProjectId:T="",initialTaskGroup:R="To Do"}=e,[P,A]=(0,r.useState)([]),[D,F]=(0,r.useState)([]),[S,L]=(0,r.useState)([]),[G,V]=(0,r.useState)(!1),[I,J]=(0,r.useState)(!1),[M,q]=(0,r.useState)(!1),[U,B]=(0,r.useState)({title:"",description:"",status:"Pending",priority:"Medium",task_group:R,project_id:T,assigned_to:"",due_date:null}),[z,H]=(0,r.useState)({}),[K,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i&&(B({title:"",description:"",status:"Pending",priority:"Medium",task_group:R,project_id:T,assigned_to:"",due_date:null}),H({}),$(),W(),T?Y(T):Y())},[i,T,R]);let $=(0,r.useCallback)(async()=>{if(!(P.length>0)){V(!0);try{let{data:e,error:t}=await (0,y.A)("GET",k.s.PROJECT.base);t?(console.error("Error fetching projects:",t),(0,N.oR)({title:"Error",description:"Failed to load projects. Using default options.",variant:"destructive"})):e&&e.projects&&e.projects.length>0&&A(e.projects)}catch(e){console.error("Error fetching projects:",e)}finally{V(!1)}}},[P.length,N.oR]),W=(0,r.useCallback)(async()=>{if(!(D.length>0)){J(!0);try{let{data:e,error:t}=await (0,y.A)("GET",k.s.AUTH.allTeamMember);t?(console.error("Error fetching team members:",t),(0,N.oR)({title:"Error",description:"Failed to load team members. Using default options.",variant:"destructive"})):e&&e.team_members&&e.team_members.length>0&&F(e.team_members)}catch(e){console.error("Error fetching team members:",e)}finally{J(!1)}}},[D.length]),Y=(0,r.useCallback)(async e=>{q(!0);try{let t=k.s.TASK.groups;e&&(t="".concat(t,"?projectId=").concat(e));let{data:a,error:s}=await (0,y.A)("GET",t);s?console.error("Error fetching task groups:",s):a&&a.length>0&&L(a)}catch(e){console.error("Error fetching task groups:",e)}finally{q(!1)}},[]),Z=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase():"U",Q=(0,r.useCallback)((e,t)=>{B(a=>({...a,[e]:t})),"project_id"===e&&t&&Y(t),z[e]&&H(t=>{let a={...t};return delete a[e],a})},[z,Y]),X=(0,r.useCallback)(()=>{let e={};return U.title.trim()||(e.title="Title is required"),U.project_id||(e.project_id="Project is required"),H(e),0===Object.keys(e).length},[U.title,U.project_id]),ee=(0,r.useCallback)(async e=>{if(e.preventDefault(),X()){O(!0);try{await E(U)&&(B({title:"",description:"",status:"Pending",priority:"Medium",task_group:R,project_id:T,assigned_to:"",due_date:null}),n())}catch(e){console.error("Error creating task:",e),(0,N.oR)({title:"Error",description:e.message||"Failed to create task. Please try again.",variant:"destructive"})}finally{O(!1)}}},[U,T,R,n,E,X]),et=S.length>0?S.map(e=>({value:e,label:e})):_,ea=!!T;return(0,s.jsx)(h.lG,{open:i,onOpenChange:e=>!e&&n(),children:(0,s.jsx)(h.Cf,{className:"sm:max-w-[600px] p-0 overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-col max-h-[85vh]",children:[(0,s.jsxs)(h.c7,{className:"bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-pink-500/10 dark:from-indigo-950 dark:via-purple-950 dark:to-pink-950 p-6 border-b",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(h.L3,{className:"text-xl font-semibold tracking-tight",children:"Create New Task"})}),(0,s.jsx)(h.rr,{className:"text-muted-foreground mt-1.5",children:"Add a new task to your project"})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto p-6",children:(0,s.jsx)("form",{id:"new-task-form",onSubmit:ee,className:"space-y-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(m.J,{htmlFor:"title",className:(0,v.cn)(z.title?"text-destructive":""),children:["Task Title ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(u.p,{id:"title",value:U.title,onChange:e=>Q("title",e.target.value),placeholder:"Enter task title",className:(0,v.cn)(z.title?"border-destructive":"")}),z.title&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:z.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(x.T,{id:"description",value:U.description,onChange:e=>Q("description",e.target.value),placeholder:"Enter task description",className:"min-h-[100px] resize-none"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(m.J,{htmlFor:"project",className:(0,v.cn)(z.project_id?"text-destructive":""),children:["Project ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),ea?(0,s.jsx)("div",{className:"flex items-center h-10 px-3 py-2 text-sm border rounded-md bg-muted",children:(null===(t=P.find(e=>e.id===T))||void 0===t?void 0:t.title)||"Current Project"}):(0,s.jsxs)(p.l6,{value:U.project_id,onValueChange:e=>Q("project_id",e),children:[(0,s.jsx)(p.bq,{id:"project",className:(0,v.cn)(z.project_id?"border-destructive":""),disabled:G,children:(0,s.jsx)(p.yv,{placeholder:G?"Loading projects...":"Select project"})}),(0,s.jsx)(p.gC,{children:P.length>0?P.map(e=>(0,s.jsx)(p.eb,{value:e.id,children:e.title},e.id)):(0,s.jsx)(p.eb,{value:"project-1",children:"E-commerce Website"})})]}),z.project_id&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:z.project_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"assigned_to",children:"Assign To"}),(0,s.jsxs)(p.l6,{value:U.assigned_to,onValueChange:e=>Q("assigned_to",e),children:[(0,s.jsx)(p.bq,{id:"assigned_to",disabled:I,children:(0,s.jsx)(p.yv,{placeholder:I?"Loading team members...":"Select team member"})}),(0,s.jsx)(p.gC,{children:D.length>0?D.map(e=>(0,s.jsx)(p.eb,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(j.eu,{className:"h-6 w-6",children:[(0,s.jsx)(j.BK,{src:e.profile_image||void 0,alt:e.user_name}),(0,s.jsx)(j.q5,{className:"text-xs bg-gradient-to-br from-indigo-500 to-purple-600 text-white",children:Z(e.user_name)})]}),(0,s.jsx)("span",{children:e.user_name})]})},e.id)):(0,s.jsx)(p.eb,{value:"no-members",children:"No team members available"})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"status",children:"Status"}),(0,s.jsxs)(p.l6,{value:U.status,onValueChange:e=>Q("status",e),children:[(0,s.jsx)(p.bq,{id:"status",children:(0,s.jsx)(p.yv,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[null===(a=w.find(e=>e.value===U.status))||void 0===a?void 0:a.icon,(0,s.jsx)("span",{children:U.status})]})})}),(0,s.jsx)(p.gC,{children:w.map(e=>(0,s.jsx)(p.eb,{value:e.value,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon,(0,s.jsx)("span",{children:e.label})]})},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"priority",children:"Priority"}),(0,s.jsxs)(p.l6,{value:U.priority,onValueChange:e=>Q("priority",e),children:[(0,s.jsx)(p.bq,{id:"priority",children:(0,s.jsx)(p.yv,{children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(b.E,{className:"".concat(null===(l=C.find(e=>e.value===U.priority))||void 0===l?void 0:l.color," text-xs border"),children:U.priority})})})}),(0,s.jsx)(p.gC,{children:C.map(e=>(0,s.jsx)(p.eb,{value:e.value,children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(b.E,{className:"".concat(e.color," text-xs border"),children:e.label})})},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"task_group",children:"Group"}),(0,s.jsxs)(p.l6,{value:U.task_group,onValueChange:e=>Q("task_group",e),children:[(0,s.jsx)(p.bq,{id:"task_group",disabled:M,children:(0,s.jsx)(p.yv,{placeholder:M?"Loading groups...":"Select group"})}),(0,s.jsx)(p.gC,{children:et.map(e=>(0,s.jsx)(p.eb,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"due_date",children:"Due Date"}),(0,s.jsxs)(f.AM,{children:[(0,s.jsx)(f.Wv,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",className:(0,v.cn)("w-full justify-start text-left font-normal",!U.due_date&&"text-muted-foreground"),children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),U.due_date?(0,o.GP)(U.due_date,"PPP"):"Select a date"]})}),(0,s.jsx)(f.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(g.V,{mode:"single",selected:U.due_date||void 0,onSelect:e=>Q("due_date",e),initialFocus:!0})})]})]})]})})}),(0,s.jsxs)(h.Es,{className:"p-6 border-t",children:[(0,s.jsx)(c.$,{variant:"outline",onClick:n,disabled:K,children:"Cancel"}),(0,s.jsx)(c.$,{type:"submit",form:"new-task-form",disabled:K,className:"gap-1.5",children:K?"Creating...":"Create Task"})]})]})})})})},34964:(e,t,a)=>{a.d(t,{Tabs:()=>n,TabsContent:()=>c,TabsList:()=>d,TabsTrigger:()=>o});var s=a(95155),r=a(12115),l=a(60704),i=a(53999);let n=l.bL,d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});d.displayName=l.B8.displayName;let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});o.displayName=l.l9.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});c.displayName=l.UC.displayName},60704:(e,t,a)=>{a.d(t,{B8:()=>R,UC:()=>A,bL:()=>T,l9:()=>P});var s=a(12115),r=a(85185),l=a(46081),i=a(89196),n=a(28905),d=a(63655),o=a(94315),c=a(5845),u=a(61285),m=a(95155),x="Tabs",[p,h]=(0,l.A)(x,[i.RG]),g=(0,i.RG)(),[f,j]=p(x),b=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,onValueChange:r,defaultValue:l,orientation:i="horizontal",dir:n,activationMode:p="automatic",...h}=e,g=(0,o.jH)(n),[j,b]=(0,c.i)({prop:s,onChange:r,defaultProp:null!=l?l:"",caller:x});return(0,m.jsx)(f,{scope:a,baseId:(0,u.B)(),value:j,onValueChange:b,orientation:i,dir:g,activationMode:p,children:(0,m.jsx)(d.sG.div,{dir:g,"data-orientation":i,...h,ref:t})})});b.displayName=x;var v="TabsList",N=s.forwardRef((e,t)=>{let{__scopeTabs:a,loop:s=!0,...r}=e,l=j(v,a),n=g(a);return(0,m.jsx)(i.bL,{asChild:!0,...n,orientation:l.orientation,dir:l.dir,loop:s,children:(0,m.jsx)(d.sG.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:t})})});N.displayName=v;var y="TabsTrigger",k=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,disabled:l=!1,...n}=e,o=j(y,a),c=g(a),u=_(o.baseId,s),x=E(o.baseId,s),p=s===o.value;return(0,m.jsx)(i.q7,{asChild:!0,...c,focusable:!l,active:p,children:(0,m.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":x,"data-state":p?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...n,ref:t,onMouseDown:(0,r.m)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;p||l||!e||o.onValueChange(s)})})})});k.displayName=y;var w="TabsContent",C=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,forceMount:l,children:i,...o}=e,c=j(w,a),u=_(c.baseId,r),x=E(c.baseId,r),p=r===c.value,h=s.useRef(p);return s.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(n.C,{present:l||p,children:a=>{let{present:s}=a;return(0,m.jsx)(d.sG.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:x,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:s&&i})}})});function _(e,t){return"".concat(e,"-trigger-").concat(t)}function E(e,t){return"".concat(e,"-content-").concat(t)}C.displayName=w;var T=b,R=N,P=k,A=C},99840:(e,t,a)=>{a.d(t,{Cf:()=>m,Es:()=>p,L3:()=>h,c7:()=>x,lG:()=>d,rr:()=>g,zM:()=>o});var s=a(95155),r=a(12115),l=a(15452),i=a(54416),n=a(53999);let d=l.bL,o=l.l9,c=e=>{let{className:t,...a}=e;return(0,s.jsx)(l.ZL,{...a,children:(0,s.jsx)("div",{className:(0,n.cn)(t),children:a.children})})};c.displayName=l.ZL.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=l.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-3xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",a),...d,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=l.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=l.VY.displayName}}]);