(()=>{var e={};e.id=4466,e.ids=[4466],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5486:e=>{"use strict";e.exports=require("bcrypt")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},25152:(e,t,s)=>{Promise.resolve().then(s.bind(s,44153))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},44153:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\bhadr\\\\Downloads\\\\webstack\\\\app\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\bhadr\\Downloads\\webstack\\app\\app\\page.tsx","default")},54528:(e,t,s)=>{Promise.resolve().then(s.bind(s,97286))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57221:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(65239),a=s(48088),i=s(88170),l=s.n(i),n=s(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d={children:["",{children:["app",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,44153)),"C:\\Users\\bhadr\\Downloads\\webstack\\app\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,93538)),"C:\\Users\\bhadr\\Downloads\\webstack\\app\\app\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"C:\\Users\\bhadr\\Downloads\\webstack\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\bhadr\\Downloads\\webstack\\app\\app\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/app/page",pathname:"/app",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},59400:(e,t,s)=>{"use strict";s.d(t,{W:()=>c});var r=s(60687),a=s(99270),i=s(96474),l=s(16189),n=s(24934),o=s(55192),d=s(9890);function c({searchQuery:e,userRole:t}){let s=(0,l.useRouter)();return(0,r.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,r.jsx)(o.Zp,{children:(0,r.jsxs)(o.Wu,{className:"flex flex-col items-center justify-center py-10",children:[(0,r.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,r.jsx)(a.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No projects found"}),(0,r.jsx)("p",{className:"text-muted-foreground text-center max-w-md mb-6",children:e?`No projects matching "${e}"`:"Get started by creating your first project"}),("admin"===t||"customer"===t)&&(0,r.jsxs)(n.$,{onClick:()=>s.push("/app/projects/new"),className:"flex items-center",children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Create Project"]})]})})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},90328:(e,t,s)=>{"use strict";s.d(t,{R:()=>h});var r=s(60687),a=s(96474),i=s(5336),l=s(48730),n=s(65822),o=s(40228),d=s(93661),c=s(9890),m=s(70373),u=s(59821),p=s(24934);let x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function h({tasks:e,onTaskClick:t}){let s=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase():"U",h=e=>{let t=new Date(e),s=Math.abs(new Date().getTime()-t.getTime()),r=Math.floor(s/864e5),a=Math.floor(s/36e5),i=Math.floor(s/6e4);return r>0?1===r?"1 day ago":`${r} days ago`:a>0?1===a?"1 hour ago":`${a} hours ago`:i>0?1===i?"1 minute ago":`${i} minutes ago`:"Just now"};return(0,r.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-border/50 shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-3 p-3 text-xs font-medium text-muted-foreground border-b",children:[(0,r.jsx)("div",{className:"col-span-5",children:"Task"}),(0,r.jsx)("div",{className:"col-span-2 text-center",children:"Assignee"}),(0,r.jsx)("div",{className:"col-span-2 text-center",children:"Due Date"}),(0,r.jsx)("div",{className:"col-span-2 text-center",children:"Priority"}),(0,r.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,r.jsx)(p.$,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full bg-primary/10 text-primary",children:(0,r.jsx)(a.A,{className:"h-3 w-3"})})})]}),(0,r.jsx)("div",{className:"divide-y divide-border/50",children:e.map(e=>(0,r.jsx)(c.P.div,{variants:x,className:"group hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer",onClick:()=>t(e),children:(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-3 p-3 items-center relative",children:["High"===e.priority&&(0,r.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-amber-500"}),"Medium"===e.priority&&(0,r.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-500"}),(0,r.jsxs)("div",{className:"col-span-5 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:"Completed"===e.status?(0,r.jsx)(i.A,{className:"h-4 w-4 text-green-500"}):"In Progress"===e.status?(0,r.jsx)(l.A,{className:"h-4 w-4 text-blue-500"}):(0,r.jsx)(n.A,{className:"h-4 w-4 text-slate-400"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,r.jsx)("h3",{className:"font-medium text-sm group-hover:text-primary transition-colors truncate",children:e.title}),(0,r.jsx)(u.E,{variant:"outline",className:"text-[10px] px-1 py-0 border-muted-foreground/30 bg-background flex-shrink-0",children:e.task_group||"Backlog"}),(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground whitespace-nowrap flex-shrink-0",children:h(e.created_at)})]})]}),(0,r.jsx)("div",{className:"col-span-2 flex justify-center",children:e.assignee?(0,r.jsxs)(m.eu,{className:"h-7 w-7 border border-muted",children:[(0,r.jsx)(m.BK,{src:e.assignee.profile_image||void 0,alt:e.assignee.user_name}),(0,r.jsx)(m.q5,{className:"bg-primary text-white text-xs",children:s(e.assignee.user_name)})]}):(0,r.jsx)(u.E,{variant:"outline",className:"text-xs bg-slate-100 dark:bg-slate-800",children:"Unassigned"})}),(0,r.jsx)("div",{className:"col-span-2 flex justify-center items-center text-sm",children:e.due_date?(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(o.A,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-xs",children:new Date(e.due_date).toLocaleDateString()})]}):(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"No due date"})}),(0,r.jsx)("div",{className:"col-span-2 flex justify-center",children:(0,r.jsx)(u.E,{className:`${"High"===e.priority?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-100":"Medium"===e.priority?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-100"} px-2.5 py-0.5 text-xs font-medium`,children:e.priority||"Low"})}),(0,r.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,r.jsx)(p.$,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full",children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})})]})},e.id))})]})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")},96484:(e,t,s)=>{"use strict";s.d(t,{U:()=>x});var r=s(60687),a=s(9890),i=s(88233),l=s(41312),n=s(5336),o=s(40228),d=s(16189),c=s(59821),m=s(24934),u=s(55192),p=s(25354);function x({project:e,onDelete:t,isDeleting:s}){var x,h;let g=(0,d.useRouter)(),{user:j}=(0,p.n)(),b=j?.role;return(0,r.jsx)(a.P.div,{whileHover:{y:-5,transition:{duration:.2}},children:(0,r.jsxs)(u.Zp,{className:"overflow-hidden cursor-pointer relative group border-border/40 bg-gradient-to-b from-white to-slate-50/50 dark:from-slate-900 dark:to-slate-800/50 shadow-sm hover:shadow-md transition-all duration-300",onClick:()=>g.push(`/app/projects/${e.id}`),children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600 z-10 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,r.jsxs)("div",{className:"p-3 relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex-1 pr-4",children:[(0,r.jsx)("h3",{className:"text-base font-semibold truncate",children:e.title}),("admin"===b||"team_member"===b)&&(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.total_tasks||0," tasks â€¢ ",e.completed_tasks||0," completed"]}),"customer"===b&&(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]}),"admin"===b&&(0,r.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-red-500",onClick:s=>{s.stopPropagation(),t(e.id)},disabled:s,children:(0,r.jsx)(i.A,{className:"h-3.5 w-3.5"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,r.jsx)("span",{className:"text-muted-foreground font-medium",children:"Progress"}),(0,r.jsxs)("span",{className:"font-semibold",children:[e.progress_percentage||0,"%"]})]}),(0,r.jsx)("div",{className:"h-1 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-primary to-purple-600 rounded-full transition-all duration-500",style:{width:`${e.progress_percentage||0}%`}})}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-1 mt-1 border-t border-border/30 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(c.E,{className:`${(x=e.progress_percentage)?x>=100?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100":x>50?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-100":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100"} px-1.5 py-0 text-[10px] font-medium`,children:(h=e.progress_percentage)?h>=100?"Completed":h>50?"In Progress":"Planning":"Planning"}),"team_member"===b&&(0,r.jsx)("div",{className:"flex items-center gap-1 ml-1",children:e.isTeamMember?(0,r.jsxs)(c.E,{variant:"outline",className:"px-1.5 py-0 text-[10px] font-medium border-primary/30 text-primary",children:[(0,r.jsx)(l.A,{className:"h-2.5 w-2.5 mr-0.5"}),"Team"]}):e.hasAssignedTasks&&(0,r.jsxs)(c.E,{variant:"outline",className:"px-1.5 py-0 text-[10px] font-medium border-purple-500/30 text-purple-500",children:[(0,r.jsx)(n.A,{className:"h-2.5 w-2.5 mr-0.5"}),"Tasks"]})}),"customer"!==b&&"team_member"!==b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-primary/80 to-purple-600/80 flex items-center justify-center text-white text-[10px] font-bold ml-1",children:"admin"===b&&e.customer_id===j.id?"S":e.customer_name?e.customer_name.charAt(0).toUpperCase():"P"}),(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground truncate max-w-[60px]",children:"admin"===b&&e.customer_id===j.id?"Self":e.customer_name||"Project"})]})]}),e.start_date&&e.duration_days&&(0,r.jsxs)("div",{className:"flex items-center text-[10px] text-muted-foreground",children:[(0,r.jsx)(o.A,{className:"h-3 w-3 mr-1"}),(0,r.jsx)("span",{children:((e,t)=>{if(!e||!t)return null;let s=new Date(e);return s.setDate(s.getDate()+t),s})(e.start_date,e.duration_days)?.toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})]})]})]})]})})}},97286:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var r=s(60687),a=s(43210),i=s(9890),l=s(25354);s(34735),s(46677);var n=s(16189),o=s(93551),d=s(82005),c=s(71702),m=s(35020),u=s(48730),p=s(58887),x=s(5336),h=s(55192);let g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},j={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function b({userRole:e,stats:t}){return(0,r.jsx)(i.P.div,{variants:j,initial:"hidden",animate:"visible",className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.P.div,{variants:g,children:(0,r.jsxs)(h.Zp,{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-blue-600"}),(0,r.jsx)(h.Wu,{className:"p-4 md:p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Projects"}),(0,r.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mt-1",children:t.totalProjects})]}),(0,r.jsx)("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:(0,r.jsx)(m.A,{className:"h-5 w-5 md:h-6 md:w-6 text-blue-600 dark:text-blue-400"})})]})})]})}),(0,r.jsx)(i.P.div,{variants:g,children:(0,r.jsxs)(h.Zp,{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-green-600"}),(0,r.jsx)(h.Wu,{className:"p-4 md:p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"In Development"}),(0,r.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mt-1",children:t.inProgressTasks})]}),(0,r.jsx)("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600 dark:text-green-400"})})]})})]})}),(0,r.jsx)(i.P.div,{variants:g,children:(0,r.jsxs)(h.Zp,{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 to-amber-600"}),(0,r.jsx)(h.Wu,{className:"p-4 md:p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Awaiting Feedback"}),(0,r.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mt-1",children:t.pendingTasks})]}),(0,r.jsx)("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:(0,r.jsx)(p.A,{className:"h-5 w-5 md:h-6 md:w-6 text-amber-600 dark:text-amber-400"})})]})})]})}),(0,r.jsx)(i.P.div,{variants:g,children:(0,r.jsxs)(h.Zp,{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-500 to-purple-600"}),(0,r.jsx)(h.Wu,{className:"p-4 md:p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),(0,r.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mt-1",children:t.completedTasks})]}),(0,r.jsx)("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:(0,r.jsx)(x.A,{className:"h-5 w-5 md:h-6 md:w-6 text-purple-600 dark:text-purple-400"})})]})})]})})]})})}var f=s(85814),v=s.n(f),y=s(85778),N=s(41312),w=s(60);function k({userRole:e}){let t={customer:[{title:"New Project",description:"Start a new website project",icon:m.A,href:"/app/projects/new",color:"from-blue-500 to-blue-600",iconBg:"bg-blue-500"},{title:"Messages",description:"Contact your project team",icon:p.A,href:"/app/messages",color:"from-green-500 to-green-600",iconBg:"bg-green-500"},{title:"Payments",description:"Manage your subscriptions",icon:y.A,href:"/app/payments",color:"from-purple-500 to-purple-600",iconBg:"bg-purple-500"}],team_member:[{title:"Tasks",description:"View your assigned tasks",icon:x.A,href:"/app/tasks",color:"from-blue-500 to-blue-600",iconBg:"bg-blue-500"},{title:"Projects",description:"Manage active projects",icon:m.A,href:"/app/projects",color:"from-purple-500 to-purple-600",iconBg:"bg-purple-500"},{title:"Messages",description:"Communicate with clients",icon:p.A,href:"/app/messages",color:"from-green-500 to-green-600",iconBg:"bg-green-500"}],admin:[{title:"Team",description:"Manage team members",icon:N.A,href:"/app/admin/team",color:"from-indigo-500 to-indigo-600",iconBg:"bg-indigo-500"},{title:"Projects",description:"Oversee all projects",icon:m.A,href:"/app/projects",color:"from-purple-500 to-purple-600",iconBg:"bg-purple-500"},{title:"Analytics",description:"View performance metrics",icon:w.A,href:"/app/admin/analytics",color:"from-blue-500 to-blue-600",iconBg:"bg-blue-500"}]}[e];return(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:t.map((e,t)=>(0,r.jsx)(i.P.div,{whileHover:{y:-5,transition:{duration:.2}},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:(0,r.jsx)(v(),{href:e.href,children:(0,r.jsxs)(h.Zp,{className:"h-full hover:shadow-md transition-all cursor-pointer overflow-hidden",children:[(0,r.jsx)("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.color}`}),(0,r.jsxs)(h.Wu,{className:"p-4 md:p-6 flex items-start gap-4",children:[(0,r.jsx)("div",{className:`h-10 w-10 md:h-12 md:w-12 rounded-full ${e.iconBg} text-white flex items-center justify-center shadow-lg`,children:(0,r.jsx)(e.icon,{className:"h-5 w-5 md:h-6 md:w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]})]})]})})},e.title))})]})}var P=s(24934),_=s(96484),A=s(59400);let C={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function q({projects:e,userRole:t}){return(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Projects"}),(0,r.jsx)(P.$,{asChild:!0,variant:"outline",size:"sm",children:(0,r.jsxs)(v(),{href:"/app/projects",children:["View All",(0,r.jsx)(w.A,{className:"ml-2 h-4 w-4"})]})})]}),(0,r.jsx)(i.P.div,{variants:C,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.length>0?e.slice(0,3).map(e=>{let t={...e,updated_at:e.updated_at??null};return(0,r.jsx)(_.U,{project:t,onDelete:()=>{},isDeleting:!1},t.id)}):(0,r.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"col-span-full",children:(0,r.jsx)(A.W,{searchQuery:"",userRole:t})})})]})}var T=s(90328);function D({recentTasks:e,onTaskClick:t,userRole:s}){return"team_member"!==s&&"admin"!==s?null:(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Tasks"}),(0,r.jsx)(P.$,{asChild:!0,variant:"outline",size:"sm",children:(0,r.jsxs)(v(),{href:"/app/tasks",children:["View All",(0,r.jsx)(w.A,{className:"ml-2 h-4 w-4"})]})})]}),e.length>0?(0,r.jsx)(T.R,{tasks:e,onTaskClick:t}):(0,r.jsx)(h.Zp,{className:"p-8 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)(x.A,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"No recent tasks"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:"You don't have any tasks assigned to you yet."})]})})]})}function $(){let e,t;let{user:s,isLoading:m}=(0,l.n)(),[u,p]=(0,a.useState)([]),[x,h]=(0,a.useState)([]),[g,j]=(0,a.useState)({totalProjects:0,completedTasks:0,pendingTasks:0,inProgressTasks:0}),[f,v]=(0,a.useState)(!0),[y,N]=(0,a.useState)(null),[w,P]=(0,a.useState)(!1),{handleUpdateTask:_}=(0,d.L)(),{toast:A}=(0,c.dj)(),C=s?.role||"user",T=s?.user_name||"User";(0,n.useRouter)();let $=async(e,t)=>{try{x.find(t=>t.id===e)&&(y&&y.id===e&&N({...y,status:t}),h(s=>s.map(s=>s.id===e?{...s,status:t}:s))),await _(e,{status:t}),A({title:"Success",description:`Task status updated to ${t}`})}catch(t){if(console.error("Error updating task status:",t),A({title:"Error",description:"Failed to update task status. Please try again.",variant:"destructive"}),y&&y.id===e){let t=x.find(t=>t.id===e);t&&N(t)}}},E=async e=>{try{h(t=>t.map(t=>t.id===e.id?e:t)),y&&y.id===e.id&&N(e),A({title:"Success",description:"Task updated successfully"})}catch(e){console.error("Error updating task:",e),A({title:"Error",description:"Failed to update task. Please try again.",variant:"destructive"})}};return f||m?(0,r.jsxs)("div",{className:"space-y-8 animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-muted rounded-md w-2/3"}),(0,r.jsx)("div",{className:"h-4 bg-muted rounded-md w-1/2"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,r.jsx)("div",{className:"h-32 bg-muted rounded-lg"},e))}),(0,r.jsx)("div",{className:"h-64 bg-muted rounded-lg"})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.P.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-2xl md:text-3xl font-semibold tracking-tight",children:["Welcome back, ",T]}),(0,r.jsxs)(i.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-muted-foreground",children:["Here's an overview of your"," ","customer"===C?"projects":"workspace"]})]}),(0,r.jsx)(b,{userRole:C,stats:g}),(0,r.jsx)(k,{userRole:C}),(0,r.jsx)(q,{projects:u,userRole:C}),(0,r.jsx)(D,{recentTasks:x,onTaskClick:e=>{N(e),P(!0)},userRole:C}),y&&(0,r.jsx)(o.u,{task:y,isOpen:w,onClose:()=>P(!1),onStatusChange:$,relatedTasks:y?(e=y.id,t=y.project_id,x.filter(s=>s.project_id===t&&s.id!==e)):[],handleUpdateTask:_,onTaskUpdate:E})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[7719,4888,515,7703,1846,990,5650,8040,8235,8928,8490],()=>s(57221));module.exports=r})();